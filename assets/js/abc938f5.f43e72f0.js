"use strict";(self.webpackChunkdocdevtron=self.webpackChunkdocdevtron||[]).push([[7468],{1470:(e,n,t)=>{t.d(n,{A:()=>w});var a=t(6540),r=t(4164),s=t(7559),o=t(3104),l=t(6347),i=t(205),d=t(7485),c=t(1682),u=t(679);function h(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,a.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:t,default:a}})=>({value:e,label:n,attributes:t,default:a}))}(t);return function(e){const n=(0,c.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}function v({queryString:e=!1,groupId:n}){const t=(0,l.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(r),(0,a.useCallback)(e=>{if(!r)return;const n=new URLSearchParams(t.location.search);n.set(r,e),t.replace({...t.location,search:n.toString()})},[r,t])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,s=p(e),[o,l]=(0,a.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:s})),[d,c]=v({queryString:t,groupId:r}),[h,f]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,r]=(0,u.Dv)(n);return[t,(0,a.useCallback)(e=>{n&&r.set(e)},[n,r])]}({groupId:r}),g=(()=>{const e=d??h;return m({value:e,tabValues:s})?e:null})();(0,i.A)(()=>{g&&l(g)},[g]);return{selectedValue:o,selectValue:(0,a.useCallback)(e=>{if(!m({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),c(e),f(e)},[c,f,s]),tabValues:s}}var g=t(2303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=t(4848);function j({className:e,block:n,selectedValue:t,selectValue:a,tabValues:s}){const l=[],{blockElementScrollPositionUntilNextRender:i}=(0,o.a_)(),d=e=>{const n=e.currentTarget,r=l.indexOf(n),o=s[r].value;o!==t&&(i(n),a(o))},c=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:s.map(({value:e,label:n,attributes:a})=>(0,x.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{l.push(e)},onKeyDown:c,onClick:d,...a,className:(0,r.A)("tabs__item",b.tabItem,a?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function y({lazy:e,children:n,selectedValue:t}){const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=s.find(e=>e.props.value===t);return e?(0,a.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function A(e){const n=f(e);return(0,x.jsxs)("div",{className:(0,r.A)(s.G.tabs.container,"tabs-container",b.tabList),children:[(0,x.jsx)(j,{...n,...e}),(0,x.jsx)(y,{...n,...e})]})}function w(e){const n=(0,g.A)();return(0,x.jsx)(A,{...e,children:h(e.children)},String(n))}},8167:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"hyperion/setup/upgrade-to-devtron","title":"Upgrade Hyperion to Devtron Full mode","description":"To install Helm3, please check Installing Helm3","source":"@site/docs/hyperion/setup/upgrade-to-devtron.md","sourceDirName":"hyperion/setup","slug":"/hyperion/setup/upgrade-to-devtron","permalink":"/docs/hyperion/setup/upgrade-to-devtron","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var r=t(4848),s=t(8453),o=t(1470),l=t(9365);const i={},d="Upgrade Hyperion to Devtron Full mode",c={},u=[{value:"Installation status",id:"installation-status",level:2},{value:"Access Devtron dashboard",id:"access-devtron-dashboard",level:2},{value:"Devtron Admin credentials",id:"devtron-admin-credentials",level:3},{value:"Cleaning Devtron Installer Helm3",id:"cleaning-devtron-installer-helm3",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"upgrade-hyperion-to-devtron-full-mode",children:"Upgrade Hyperion to Devtron Full mode"})}),"\n",(0,r.jsxs)(n.p,{children:["To install Helm3, please check ",(0,r.jsx)(n.a,{href:"https://helm.sh/docs/intro/install/",children:"Installing Helm3"})]}),"\n",(0,r.jsxs)(o.A,{children:[(0,r.jsxs)(l.A,{label:"Upgrade with default configurations",value:"Upgrade with default configurations",children:[(0,r.jsx)(n.p,{children:"This installation will use Minio for storing build logs and cache."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"helm upgrade devtron devtron/devtron-operator --namespace devtroncd --set installer.mode=full\n"})})]}),(0,r.jsxs)(l.A,{label:"Upgrade with AWS S3",value:"Upgrade with AWS S3",children:[(0,r.jsx)(n.p,{children:"This installation will use AWS s3 buckets for storing build logs and cache"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"helm upgrade devtron devtron/devtron-operator --create-namespace --namespace devtroncd \\\n--set installer.mode=full \\\n--set configs.BLOB_STORAGE_PROVIDER=S3 \\\n--set configs.DEFAULT_CACHE_BUCKET=demo-s3-bucket \\\n--set configs.DEFAULT_CACHE_BUCKET_REGION=us-east-1 \\\n--set configs.DEFAULT_BUILD_LOGS_BUCKET=demo-s3-bucket \\\n--set configs.DEFAULT_CD_LOGS_BUCKET_REGION=us-east-1\n"})})]}),(0,r.jsxs)(l.A,{label:"Upgrade with Azure Blob Storage",value:"Upgrade with Azure Blob Storage",children:[(0,r.jsx)(n.p,{children:"This installation will use Azure Blob Storage for storing build logs and cache"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"helm upgrade devtron devtron/devtron-operator --create-namespace --namespace devtroncd \\\n--set installer.mode=full \\\n--set secrets.AZURE_ACCOUNT_KEY=xxxxxxxxxx \\\n--set configs.BLOB_STORAGE_PROVIDER=AZURE \\\n--set configs.AZURE_ACCOUNT_NAME=test-account \\\n--set configs.AZURE_BLOB_CONTAINER_CI_LOG=ci-log-container \\\n--set configs.AZURE_BLOB_CONTAINER_CI_CACHE=ci-cache-container\n"})})]})]}),"\n",(0,r.jsxs)(n.p,{children:["If you are planning to use Devtron for ",(0,r.jsx)(n.code,{children:"production deployments"}),", please refer to our recommended overrides for ",(0,r.jsx)(n.a,{href:"/docs/setup/install/override-default-devtron-installation-configs",children:"Devtron Installation"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"installation-status",children:"Installation status"}),"\n",(0,r.jsx)(n.p,{children:"Run following command"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl -n devtroncd get installers installer-devtron -o jsonpath='{.status.sync.status}'\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The install commands initiates Devtron-operator which spins up all the Devtron micro-services one by one in about 20 mins. You can use the above command to check the status of the installation if the installation is still in progress, it will print ",(0,r.jsx)(n.code,{children:"Downloaded"}),". When the installation is complete, it prints ",(0,r.jsx)(n.code,{children:"Applied"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"access-devtron-dashboard",children:"Access Devtron dashboard"}),"\n",(0,r.jsxs)(n.p,{children:["If you did not provide a ",(0,r.jsx)(n.strong,{children:"BASE_URL"})," during install or have used the default installation, Devtron creates a loadbalancer for you on its own. Use the following command to get the dashboard url."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"kubectl get svc -n devtroncd devtron-service -o jsonpath='{.status.loadBalancer.ingress}'\n"})}),"\n",(0,r.jsx)(n.p,{children:"You will get result something like below"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"[test2@server ~]$ kubectl get svc -n devtroncd devtron-service -o jsonpath='{.status.loadBalancer.ingress}'\n[map[hostname:aaff16e9760594a92afa0140dbfd99f7-305259315.us-east-1.elb.amazonaws.com]]\n"})}),"\n",(0,r.jsx)(n.p,{children:"The hostname mentioned here ( aaff16e9760594a92afa0140dbfd99f7-305259315.us-east-1.elb.amazonaws.com ) is the Loadbalancer URL where you can access the Devtron dashboard."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"PS:"})," You can also do a CNAME entry corresponding to your domain/subdomain to point to this Loadbalancer URL to access it at a custom domain."]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"right"},children:"Host"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Type"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Points to"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"devtron.yourdomain.com"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"CNAME"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"aaff16e9760594a92afa0140dbfd99f7-305259315.us-east-1.elb.amazonaws.com"})]})})]}),"\n",(0,r.jsx)(n.h3,{id:"devtron-admin-credentials",children:"Devtron Admin credentials"}),"\n",(0,r.jsxs)(n.p,{children:["If you are upgrading from Hyperion to Devtron full mode, the admin password does NOT change.\nFor admin login use username:",(0,r.jsx)(n.code,{children:"admin"})," and for password run the following command."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl -n devtroncd get secret devtron-secret -o jsonpath='{.data.ACD_PASSWORD}' | base64 -d\n"})}),"\n",(0,r.jsx)(n.h3,{id:"cleaning-devtron-installer-helm3",children:"Cleaning Devtron Installer Helm3"}),"\n",(0,r.jsx)(n.p,{children:"Please make sure that you do not have anything inside namespaces devtroncd, devtron-cd devtron-ci and devtron-demo as the below steps will clean everything inside these namespaces"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"helm uninstall devtron --namespace devtroncd\nkubectl delete -n devtroncd -f https://raw.githubusercontent.com/devtron-labs/charts/main/charts/devtron/crds/crd-devtron.yaml\nkubectl delete -n argo -f https://raw.githubusercontent.com/devtron-labs/devtron/main/manifests/yamls/workflow.yaml\nkubectl delete ns devtroncd devtron-cd devtron-ci devtron-demo\n"})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var a=t(6540);const r={},s=a.createContext(r);function o(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(s.Provider,{value:n},e.children)}},9365:(e,n,t)=>{t.d(n,{A:()=>o});t(6540);var a=t(4164);const r={tabItem:"tabItem_Ymn6"};var s=t(4848);function o({children:e,hidden:n,className:t}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,a.A)(r.tabItem,t),hidden:n,children:e})}}}]);