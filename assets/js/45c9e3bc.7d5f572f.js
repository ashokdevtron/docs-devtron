"use strict";(self.webpackChunkdocdevtron=self.webpackChunkdocdevtron||[]).push([[8551],{8453:(e,t,s)=>{s.d(t,{R:()=>i,x:()=>a});var r=s(6540);const n={},c=r.createContext(n);function i(e){const t=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(c.Provider,{value:t},e.children)}},8904:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"user-guide/creating-application/base-config/eso/aws-eso","title":"AWS Secrets Manager","description":"Install External Secret Operator (ESO).","source":"@site/docs/user-guide/creating-application/base-config/eso/aws-eso.md","sourceDirName":"user-guide/creating-application/base-config/eso","slug":"/user-guide/creating-application/base-config/eso/aws-eso","permalink":"/docs-devtron/docs/user-guide/creating-application/base-config/eso/aws-eso","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Install ESO","permalink":"/docs-devtron/docs/user-guide/creating-application/base-config/eso/install-eso"},"next":{"title":"Google Secrets Manager","permalink":"/docs-devtron/docs/user-guide/creating-application/base-config/eso/gcp-eso"}}');var n=s(4848),c=s(8453);const i={},a="AWS Secrets Manager",o={},l=[{value:"ESO AWS secrets Manager Setup with Devtron using ClusterSecretsStore",id:"eso-aws-secrets-manager-setup-with-devtron-using-clustersecretsstore",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"aws-secrets-manager",children:"AWS Secrets Manager"})}),"\n",(0,n.jsx)(t.admonition,{title:"Prerequisite",type:"caution",children:(0,n.jsxs)(t.p,{children:["Install ",(0,n.jsx)(t.a,{href:"/docs-devtron/docs/user-guide/creating-application/base-config/eso/install-eso",children:"External Secret Operator (ESO)"}),"."]})}),"\n",(0,n.jsxs)(t.p,{children:["To add secrets from ",(0,n.jsx)(t.strong,{children:"AWS Secrets Manager"}),", we need to create a generic Kubernetes secret for AWS authentication."]}),"\n",(0,n.jsx)(t.p,{children:"Create a Kubernetes secret in the namespace in which the application is to be deployed using base64 encoded AWS access-key and secret-access-key. You can use a Devtron generic chart for it."}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Note"}),": You don't have to create the Kubernetes secret every time you create external secret for the respective namespace."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/aws-secret-generic-chart.jpg",alt:"Figure 1: Create Kubernetes Secret for AWS Authentication"})}),"\n",(0,n.jsxs)(t.p,{children:["After creating the generic secret, navigate to ",(0,n.jsx)(t.code,{children:"Secrets"})," section of the application and follow the steps mentioned below :"]}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Click ",(0,n.jsx)(t.code,{children:"Add Secret"})," to add a new secret"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/add-secret.jpg",alt:"Figure 2: Add a New Secret"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Select ",(0,n.jsx)(t.code,{children:"AWS Secret Manager"})," under ",(0,n.jsx)(t.code,{children:"External Secret Operator"})," (ESO) from the dropdown of ",(0,n.jsx)(t.code,{children:"Data type"})]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/aws-secret-manager-dropdown.jpg",alt:"Figure 3: Select AWS Secrets Manager"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Configure the secret."}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Key"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"region"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"AWS region in which secret is created"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"accessKeyIDSecretRef.name"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Name of secret created that would be used for authentication"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"accessKeyIDSecretRef.key"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"In generic secret created for AWS authentication, variable name in which base64 encoded AWS access-key is stored"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"secretAccessKeySecretRef.name"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Name of secret created that would be used for authentication"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"secretAccessKeySecretRef.key"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"In generic secret created for AWS authentication, variable name in which base64 encoded secret-access-key is stored"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"secretKey"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Key name to store secret"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"key"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"AWS Secrets Manager secret name"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"property"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"AWS Secrets Manager secret key"})]})]})]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/aws-eso.jpg",alt:"Figure 4: Configure AWS Secret Settings"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/aws-external-secret.jpg",alt:"Figure 5: AWS External Secret Configuration"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Save the secret."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"eso-aws-secrets-manager-setup-with-devtron-using-clustersecretsstore",children:"ESO AWS secrets Manager Setup with Devtron using ClusterSecretsStore"}),"\n",(0,n.jsx)(t.p,{children:"ClusterSecretStore provides a secure and centralized storage solution for managing and accessing sensitive information, such as passwords, API keys, certificates, and other credentials, within a cluster or application environment."}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Requirement:"})," Devtron deployment template chart version should be 4.17 and above."]}),"\n",(0,n.jsx)(t.p,{children:"To setup ESO AWS secrets manager with Devtron using ClusterSecretsStore, follow the mentined steps:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"1. Create a secret for AWS authentication"})}),"\n",(0,n.jsx)(t.p,{children:"Create a Kubernetes secret in any namespace using base64 encoded AWS access-key and secret-access-key. You can use the devtron generic chart for this."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/aws-secret-generic-chart.jpg",alt:"Figure 6: Use Generic Chart"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["2. Create a ",(0,n.jsx)(t.code,{children:"ClusterSecretStore"})]})}),"\n",(0,n.jsxs)(t.p,{children:["Create a ",(0,n.jsx)(t.code,{children:"ClusterSecretStore"})," using the secret created for AWS authentication in step 1."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/clustersecretstore-yaml.jpg",alt:"Figure 7: Create ClusterSecretStore"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"3. Create a secret in the application using ESO AWS Secrets Manager"})}),"\n",(0,n.jsx)(t.p,{children:"Go to the application where you want to create an external secret. Navigate to secrets section under application configuration and create a secret using ESO AWS Secrets Manager."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/app-secret-clustersecretstore.jpg",alt:"Figure 8: Create Secret"})})]})}function h(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}}}]);