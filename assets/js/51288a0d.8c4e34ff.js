"use strict";(self.webpackChunkdocdevtron=self.webpackChunkdocdevtron||[]).push([[686],{1825:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"user-guide/creating-application/workflow/ci-pipeline","title":"CI Pipeline","description":"For Devtron version older than v0.4.0, please refer the CI Pipeline (legacy) page.","source":"@site/docs/user-guide/creating-application/workflow/ci-pipeline.md","sourceDirName":"user-guide/creating-application/workflow","slug":"/user-guide/creating-application/workflow/ci-pipeline","permalink":"/docs/user-guide/creating-application/workflow/ci-pipeline","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Workflow Editor","permalink":"/docs/user-guide/creating-application/workflow/"},"next":{"title":"Pre-Build and Post-Build Stages","permalink":"/docs/user-guide/creating-application/workflow/ci-build-pre-post-plugins"}}');var s=n(4848),l=n(8453);const r={},o="CI Pipeline",c={},a=[{value:"Creating CI Pipeline",id:"creating-ci-pipeline",level:2},{value:"1. Build from Source Code",id:"1-build-from-source-code",level:3},{value:"Advanced Options",id:"advanced-options",level:4},{value:"Build Stage",id:"build-stage",level:4},{value:"Docker Layer Caching",id:"docker-layer-caching-",level:5},{value:"1. Orchestrator ConfigMap (Global Settings)",id:"1-orchestrator-configmap-global-settings",level:6},{value:"2. Editing Pipeline",id:"2-editing-pipeline",level:6},{value:"3. During Trigger",id:"3-during-trigger",level:6},{value:"Source type",id:"source-type",level:5},{value:"Branch Fixed",id:"branch-fixed",level:6},{value:"Branch Regex",id:"branch-regex",level:6},{value:"Pull Request",id:"pull-request",level:6},{value:"Tag Creation",id:"tag-creation",level:6},{value:"Scan for Vulnerabilities",id:"scan-for-vulnerabilities",level:5},{value:"Custom Image Tag Pattern",id:"custom-image-tag-pattern",level:5},{value:"2. Linked Build Pipeline",id:"2-linked-build-pipeline",level:3},{value:"3. Deploy Image from External Service",id:"3-deploy-image-from-external-service",level:3},{value:"Webhook URL",id:"webhook-url",level:4},{value:"Sample cURL Request",id:"sample-curl-request",level:4},{value:"Response Codes",id:"response-codes",level:4},{value:"Integrate with External Sources - Jenkins or CircleCI",id:"integrate-with-external-sources---jenkins-or-circleci",level:4},{value:"Updating CI Pipeline",id:"updating-ci-pipeline",level:2},{value:"Deleting CI Pipeline",id:"deleting-ci-pipeline",level:2},{value:"Extras",id:"extras",level:2},{value:"Configuring Webhook",id:"configuring-webhook",level:3},{value:"For GitHub",id:"for-github",level:4},{value:"For Bitbucket Cloud",id:"for-bitbucket-cloud",level:4}];function d(e){const i={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"ci-pipeline",children:"CI Pipeline"})}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.p,{children:["For Devtron version older than v0.4.0, please refer the ",(0,s.jsx)(i.a,{href:"https://docs.devtron.ai/v/v0.4/devtron/user-guide/creating-application/workflow/ci-pipeline-legacy",children:"CI Pipeline (legacy)"})," page."]})}),"\n",(0,s.jsx)(i.h2,{id:"creating-ci-pipeline",children:"Creating CI Pipeline"}),"\n",(0,s.jsx)(i.p,{children:"A CI Workflow can be created in one of the following ways:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"#1-build-from-source-code",children:"Build from Source Code"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"#2-linked-build-pipeline",children:"Linked Build Pipeline"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"#3-deploy-image-from-external-service",children:"Deploy Image from External Service"})}),"\n",(0,s.jsxs)(i.li,{children:["Sync with Environment ",(0,s.jsx)(i.a,{href:"https://devtron.ai/pricing",children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",alt:""})})]}),"\n",(0,s.jsx)(i.li,{children:"Create a Job"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/workflow-ci-1.jpg",alt:""})}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow/workflow-ci.jpg",alt:""})}),"\n",(0,s.jsx)(i.p,{children:"Each method has different use-cases that can be tailored according the needs of the organization."}),"\n",(0,s.jsx)(i.h3,{id:"1-build-from-source-code",children:"1. Build from Source Code"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"Build from Source Code"})," workflow allows you to build the container image from a source code repository."]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["From the ",(0,s.jsx)(i.strong,{children:"Applications"})," menu, select your application."]}),"\n",(0,s.jsxs)(i.li,{children:["On the ",(0,s.jsx)(i.strong,{children:"App Configuration"})," page, select ",(0,s.jsx)(i.strong,{children:"Workflow Editor"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Select ",(0,s.jsx)(i.strong,{children:"+ New Workflow"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Select ",(0,s.jsx)(i.strong,{children:"Build from Source Code"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Enter the following fields on the ",(0,s.jsx)(i.strong,{children:"Create build pipeline"})," window:"]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-pipeline-v1.jpg",alt:""})}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{style:{textAlign:"left"},children:"Field Name"}),(0,s.jsx)(i.th,{style:{textAlign:"left"},children:"Required/Optional"}),(0,s.jsx)(i.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Source type"}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Required"}),(0,s.jsxs)(i.td,{style:{textAlign:"left"},children:["Source type to trigger the CI. Available options: ",(0,s.jsx)(i.a,{href:"#branch-fixed",children:"Branch Fixed"})," | ",(0,s.jsx)(i.a,{href:"#branch-regex",children:"Branch Regex"})," |",(0,s.jsx)(i.a,{href:"#pull-request",children:"Pull Request"})," | ",(0,s.jsx)(i.a,{href:"#tag-creation",children:"Tag Creation"})]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Branch Name"}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Required"}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Branch that triggers the CI build"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Advanced Options"}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Optional"}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Create Pre-Build, Build, and Post-Build tasks"})]})]})]}),"\n",(0,s.jsx)(i.h4,{id:"advanced-options",children:"Advanced Options"}),"\n",(0,s.jsx)(i.p,{children:"The Advanced CI Pipeline includes the following stages:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Pre-build stage"}),": The tasks in this stage are executed before the image is built."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Build stage"}),": In this stage, the build is triggered from the source code that you provide."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Post-build stage"}),": The tasks in this stage will be triggered once the build is complete."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/advanced-options.jpg",alt:""})}),"\n",(0,s.jsxs)(i.p,{children:["The Pre-build and Post-build stages allow you to create Pre/Post-Build CI tasks as explained ",(0,s.jsx)(i.a,{href:"/docs/user-guide/creating-application/workflow/ci-build-pre-post-plugins",children:"here"}),"."]}),"\n",(0,s.jsx)(i.h4,{id:"build-stage",children:"Build Stage"}),"\n",(0,s.jsxs)(i.p,{children:["Go to the ",(0,s.jsx)(i.strong,{children:"Build stage"})," tab."]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/build-stage-v2.jpg",alt:"Build stage"})}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{style:{textAlign:"left"},children:"Field Name"}),(0,s.jsx)(i.th,{style:{textAlign:"left"},children:"Required/Optional"}),(0,s.jsx)(i.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"TRIGGER BUILD PIPELINE"}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Required"}),(0,s.jsxs)(i.td,{style:{textAlign:"left"},children:["The build execution may be set to: ",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)(i.strong,{children:"Automatically (default)"}),": Build is triggered automatically as the Git source code changes."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)(i.strong,{children:"Manually"}),": Build is triggered manually."]})]})]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"DOCKER LAYER CACHING"}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Optional"}),(0,s.jsxs)(i.td,{style:{textAlign:"left"},children:["Use this to ",(0,s.jsx)(i.a,{href:"#docker-layer-caching-",children:"enable/disable caching of docker image layers"})," from your build pipeline"]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Pipeline Name"}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Required"}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"A name for the pipeline"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Source type"}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Required"}),(0,s.jsxs)(i.td,{style:{textAlign:"left"},children:["Select the source type to build the CI pipeline: ",(0,s.jsx)(i.a,{href:"#branch-fixed",children:"Branch Fixed"})," | ",(0,s.jsx)(i.a,{href:"#branch-regex",children:"Branch Regex"})," | ",(0,s.jsx)(i.a,{href:"#pull-request",children:"Pull Request"})," | ",(0,s.jsx)(i.a,{href:"#tag-creation",children:"Tag Creation"})]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Branch Name"}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Required"}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Branch that triggers the CI build"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Docker build arguments"}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Optional"}),(0,s.jsxs)(i.td,{style:{textAlign:"left"},children:["Override docker build configurations for this pipeline. ",(0,s.jsx)("br",{})," ",(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"Key: Field name"}),(0,s.jsx)("li",{children:"Value: Field value"})]})]})]})]})]}),"\n",(0,s.jsxs)(i.h5,{id:"docker-layer-caching-",children:["Docker Layer Caching ",(0,s.jsx)(i.a,{href:"https://devtron.ai/pricing",children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",alt:""})})]}),"\n",(0,s.jsx)(i.admonition,{title:"Prerequisite",type:"warning",children:(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"https://docs.devtron.ai/configurations-overview/installation-configuration#configuration-of-blob-storage",children:"Configure blob storage"})," if you wish to store cache."]})}),"\n",(0,s.jsxs)(i.p,{children:["If you are rebuilding the same Docker image frequently, an effective cache strategy can cut down build time. Docker images are built layer by layer and Docker\u2019s ",(0,s.jsx)(i.a,{href:"https://docs.docker.com/build/cache/",children:"layer caching mechanism"})," allows unchanged layers to be reused across pipeline runs."]}),"\n",(0,s.jsx)(i.p,{children:"You can disable caching if:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"It\u2019s not relevant to your workflow"}),"\n",(0,s.jsx)(i.li,{children:"It consumes unnecessary storage"}),"\n",(0,s.jsx)(i.li,{children:"The pipeline doesn\u2019t perform an actual Docker build"}),"\n"]}),"\n",(0,s.jsx)(i.admonition,{title:"Which cache gets impacted?",type:"info",children:(0,s.jsx)(i.p,{children:"If a PVC with cache is attached, it will not be impacted by disabling cache. Only the remote cache is disabled."})}),"\n",(0,s.jsx)(i.p,{children:"There are 3 places from where you can control the cache behavior:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"#1-orchestrator-configmap-global-settings",children:"Orchestrator ConfigMap (Global Settings)"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"#2-editing-pipeline",children:"Editing Pipeline"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"#3-during-trigger",children:"During Trigger"})}),"\n"]}),"\n",(0,s.jsx)(i.h6,{id:"1-orchestrator-configmap-global-settings",children:"1. Orchestrator ConfigMap (Global Settings)"}),"\n",(0,s.jsxs)(i.p,{children:["Super-admins can define the cache settings in ",(0,s.jsx)(i.code,{children:"orchestrator-cm"})," globally for all applications and jobs using the following flags:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-shell",children:"DEFAULT_CACHE_FOR_CI_BUILD # for main application build stage\nDEFAULT_CACHE_FOR_CI_JOB # for CI jobs\nDEFAULT_CACHE_FOR_JOB # for general jobs\nDEFAULT_CACHE_FOR_CD_PRE # for pre-deployment stage\nDEFAULT_CACHE_FOR_CD_POST # for post-deployment stage\n"})}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/orchestrator-cm.jpg",alt:"Cache behavior at Global-level"})}),"\n",(0,s.jsx)(i.h6,{id:"2-editing-pipeline",children:"2. Editing Pipeline"}),"\n",(0,s.jsxs)(i.p,{children:["Go to ",(0,s.jsx)(i.strong,{children:"Workflow Editor"})," \u2192 ",(0,s.jsx)(i.strong,{children:"Edit Build Pipeline"})," (Build Stage) \u2192 ",(0,s.jsx)(i.strong,{children:"Docker Layer Caching"})," (toggle)  \u2192 ",(0,s.jsx)(i.strong,{children:"Use remote cache"})," (checkbox)"]}),"\n",(0,s.jsxs)(i.p,{children:["By default, your build pipeline will inherit the Global Settings. However, you can use the toggle button to override it and decide the caching behavior using the ",(0,s.jsx)(i.strong,{children:"Use remote cache"})," checkbox. In other words, cache behavior defined in pipeline configuration will have higher priority than the global one."]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/inherit-global.gif",alt:"Cache behavior at Pipeline-level"})}),"\n",(0,s.jsx)(i.h6,{id:"3-during-trigger",children:"3. During Trigger"}),"\n",(0,s.jsxs)(i.p,{children:["Go to ",(0,s.jsx)(i.strong,{children:"Build & Deploy"})," (tab) \u2192 ",(0,s.jsx)(i.strong,{children:"Select Material"})," \u2192 ",(0,s.jsx)(i.strong,{children:"Ignore Cache"})," (checkbox)"]}),"\n",(0,s.jsx)(i.p,{children:"You have the option to ignore cache while triggering a build (regardless of the cache settings defined at the pipeline or global level)."}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ignore-cache.gif",alt:"Cache behavior at Trigger"})}),"\n",(0,s.jsx)(i.admonition,{title:"Note",type:"warning",children:(0,s.jsxs)(i.p,{children:["If the caching flags in ",(0,s.jsx)(i.strong,{children:"Global Settings"})," are set to false, ignoring cache becomes the default behavior even if you don't select the 'Ignore Cache' checkbox during trigger."]})}),"\n",(0,s.jsx)(i.h5,{id:"source-type",children:"Source type"}),"\n",(0,s.jsx)(i.h6,{id:"branch-fixed",children:"Branch Fixed"}),"\n",(0,s.jsx)(i.p,{children:"This allows you to trigger a CI build whenever there is a code change on the specified branch."}),"\n",(0,s.jsxs)(i.p,{children:["Enter the ",(0,s.jsx)(i.strong,{children:"Branch Name"})," of your code repository."]}),"\n",(0,s.jsx)(i.h6,{id:"branch-regex",children:"Branch Regex"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"Branch Regex"})," allows users to easily switch between branches matching the configured Regex before triggering the build pipeline.\nIn case of ",(0,s.jsx)(i.code,{children:"Branch Fixed"}),", users cannot change the branch name in ci-pipeline unless they have admin access for the app. So, if users with\n",(0,s.jsx)(i.code,{children:"Build and Deploy"})," access should be allowed to switch branch name before triggering ci-pipeline, ",(0,s.jsx)(i.code,{children:"Branch Regex"})," should be selected as source type by a user with Admin access."]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/branch-regex.jpg",alt:""})}),"\n",(0,s.jsxs)(i.p,{children:["For example if the user sets the Branch Regex as ",(0,s.jsx)(i.code,{children:"feature-*"}),", then users can trigger from branches such as ",(0,s.jsx)(i.code,{children:"feature-1450"}),", ",(0,s.jsx)(i.code,{children:"feature-hot-fix"})," etc."]}),"\n",(0,s.jsx)(i.h6,{id:"pull-request",children:"Pull Request"}),"\n",(0,s.jsx)(i.p,{children:"This allows you to trigger the CI build when a pull request is created in your repository."}),"\n",(0,s.jsxs)(i.admonition,{type:"info",children:[(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Prerequisites"})}),(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"#configuring-webhook",children:"Configure the webhook"})," for either GitHub or Bitbucket."]})]}),"\n",(0,s.jsx)(i.admonition,{type:"warning",children:(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.strong,{children:"Pull Request"})," source type feature only works for the host GitHub or Bitbucket Cloud for now. To request support for a different Git host, please create a GitHub issue ",(0,s.jsx)(i.a,{href:"https://github.com/devtron-labs/devtron/issues",children:"here"}),"."]})}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-pipeline-3.jpg",alt:""})}),"\n",(0,s.jsx)(i.p,{children:"To trigger the build from specific PRs, you can filter the PRs based on the following keys:"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{style:{textAlign:"left"},children:"Filter key"}),(0,s.jsx)(i.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:(0,s.jsx)(i.code,{children:"Author"})}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Author of the PR"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:(0,s.jsx)(i.code,{children:"Source branch name"})}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Branch from which the Pull Request is generated"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:(0,s.jsx)(i.code,{children:"Target branch name"})}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Branch to which the Pull request will be merged"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:(0,s.jsx)(i.code,{children:"Title"})}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Title of the Pull Request"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:(0,s.jsx)(i.code,{children:"State"})}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:'State of the PR. Default is "open" and cannot be changed'})]})]})]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-pipeline-8.jpg",alt:""})}),"\n",(0,s.jsxs)(i.p,{children:["Select the appropriate filter and pass the matching condition as a regular expression (",(0,s.jsx)(i.code,{children:"regex"}),")."]}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:["Devtron uses regexp library, view ",(0,s.jsx)(i.a,{href:"https://yourbasic.org/golang/regexp-cheat-sheet/",children:"regexp cheatsheet"}),". You can test your custom regex from ",(0,s.jsx)(i.a,{href:"https://regex101.com/r/lHHuaE/1",children:"here"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Select ",(0,s.jsx)(i.strong,{children:"Create Pipeline"}),"."]}),"\n",(0,s.jsx)(i.h6,{id:"tag-creation",children:"Tag Creation"}),"\n",(0,s.jsx)(i.p,{children:"This allows you to trigger the CI build whenever a new tag is created."}),"\n",(0,s.jsxs)(i.admonition,{type:"info",children:[(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Prerequisites"})}),(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"#configuring-webhook",children:"Configure the webhook"})," for either GitHub or Bitbucket."]})]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-pipeline-9.jpg",alt:""})}),"\n",(0,s.jsxs)(i.p,{children:["To trigger the build from specific tags, you can filter the tags based on the ",(0,s.jsx)(i.code,{children:"author"})," and/or the ",(0,s.jsx)(i.code,{children:"tag name"}),"."]}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{style:{textAlign:"left"},children:"Filter key"}),(0,s.jsx)(i.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:(0,s.jsx)(i.code,{children:"Author"})}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"The one who created the tag"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{style:{textAlign:"left"},children:(0,s.jsx)(i.code,{children:"Tag name"})}),(0,s.jsx)(i.td,{style:{textAlign:"left"},children:"Name of the tag for which the webhook will be triggered"})]})]})]}),"\n",(0,s.jsxs)(i.p,{children:["Select the appropriate filter and pass the matching condition as a regular expression (",(0,s.jsx)(i.code,{children:"regex"}),")."]}),"\n",(0,s.jsxs)(i.p,{children:["Select ",(0,s.jsx)(i.strong,{children:"Create Pipeline"}),"."]}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.p,{children:["The total timeout for the execution of the CI pipeline is by default set as 3600 seconds. This default timeout is configurable according to the use case (refer ",(0,s.jsx)(i.a,{href:"/docs/user-guide/global-configurations/build-infra",children:"Build Infra"}),")."]})}),"\n",(0,s.jsx)(i.h5,{id:"scan-for-vulnerabilities",children:"Scan for Vulnerabilities"}),"\n",(0,s.jsxs)(i.admonition,{title:"Prerequisite",type:"info",children:[(0,s.jsx)(i.p,{children:"Install any one of the following integrations from Devtron Stack Manager:"}),(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"/docs/user-guide/integrations/vulnerability-scanning/clair",children:"Clair"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"/docs/user-guide/integrations/vulnerability-scanning/trivy",children:"Trivy"})}),"\n"]})]}),"\n",(0,s.jsxs)(i.p,{children:["To perform the security scan after the container image is built, enable the ",(0,s.jsx)(i.strong,{children:"Scan for vulnerabilities"})," toggle in the build stage. Refer ",(0,s.jsx)(i.a,{href:"/docs/user-guide/security-features",children:"Security features"})," to know more."]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/scan-for-vulnerabilities-v2.jpg",alt:""})}),"\n",(0,s.jsx)(i.h5,{id:"custom-image-tag-pattern",children:"Custom Image Tag Pattern"}),"\n",(0,s.jsxs)(i.p,{children:["This feature helps you apply custom tags (e.g., ",(0,s.jsx)(i.code,{children:"v1.0.0"}),") to readily distinguish container images within your repository."]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Enable the toggle button as shown below."}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-image-tag-pattern.jpg",alt:""})}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["You can write an alphanumeric pattern for your image tag, e.g., ",(0,s.jsx)(i.strong,{children:(0,s.jsx)(i.code,{children:"test-v1.0.{x}"})}),". Here, 'x' is a mandatory variable whose value will incrementally increase with every build. You can also define the value of 'x' for the next build trigger in case you want to change it."]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-image-tag-version.jpg",alt:""})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.admonition,{type:"warning",children:(0,s.jsx)(i.p,{children:"Ensure your custom tag do not start or end with a period (.) or comma (,)"})}),"\n",(0,s.jsxs)(i.ol,{start:"3",children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["Click ",(0,s.jsx)(i.strong,{children:"Update Pipeline"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["Now, go to ",(0,s.jsx)(i.strong,{children:"Build & Deploy"})," tab of your application, and click ",(0,s.jsx)(i.strong,{children:"Select Material"})," in the CI pipeline."]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-material.jpg",alt:""})}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["Choose the git commit you wish to use for building the container image. Click ",(0,s.jsx)(i.strong,{children:"Start Build"}),"."]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/choose-commit.jpg",alt:""})}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"The build will initiate and once it is successful the image tag would reflect at all relevant screens:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.strong,{children:"Build History"})}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/build-history.jpg",alt:""})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.strong,{children:"Docker Registry"})}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/docker-image.jpg",alt:""})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.strong,{children:"CD Pipeline (Image Selection)"})}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/select-ci-image.jpg",alt:""})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.p,{children:["Build will fail if the resulting image tag has already been built in the past. This means if there is an existing image with tag ",(0,s.jsx)(i.code,{children:"test-v1.0.0"}),", you cannot build another image having the same tag ",(0,s.jsx)(i.code,{children:"test-v1.0.0"})," in the same CI pipeline. This error might occur when you reset the value of the variable ",(0,s.jsx)(i.code,{children:"x"})," or when you disable/enable the toggle button for ",(0,s.jsx)(i.code,{children:"Custom image tag pattern"}),"."]})}),"\n",(0,s.jsx)(i.h3,{id:"2-linked-build-pipeline",children:"2. Linked Build Pipeline"}),"\n",(0,s.jsxs)(i.p,{children:["If one code is shared across multiple applications, ",(0,s.jsx)(i.code,{children:"Linked Build Pipeline"})," can be used, and only one image will be built for multiple applications because if there is only one build, it is not advisable to create multiple CI Pipelines."]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["From the ",(0,s.jsx)(i.strong,{children:"Applications"})," menu, select your application."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["On the ",(0,s.jsx)(i.strong,{children:"App Configuration"})," page, select ",(0,s.jsx)(i.strong,{children:"Workflow Editor"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["Select ",(0,s.jsx)(i.strong,{children:"+ New Workflow"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["Select ",(0,s.jsx)(i.strong,{children:"Linked Build Pipeline"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["On the ",(0,s.jsx)(i.strong,{children:"Create linked build pipeline"})," screen:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Search for the application in which the source CI pipeline is present."}),"\n",(0,s.jsx)(i.li,{children:"Select the source CI pipeline from the application that you selected above."}),"\n",(0,s.jsx)(i.li,{children:"Enter a new name for the linked CI pipeline."}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ca-workflow-linked.jpg",alt:""})}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["Click ",(0,s.jsx)(i.strong,{children:"Create Linked CI Pipeline"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Thereafter, the source CI pipeline will indicate the number of Linked CI pipelines. Upon clicking it, it will display the child information as shown below. It reveals the applications and environments where Linked CI is used for deployment."}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/linkedci.gif",alt:"Linked CI with Child Information"})}),"\n",(0,s.jsx)(i.p,{children:"After creating a linked CI pipeline, you can create a CD pipeline."}),"\n",(0,s.jsx)(i.admonition,{type:"warning",children:(0,s.jsx)(i.p,{children:"Linked CI pipelines can't trigger builds. They rely on the source CI pipeline to build images. Trigger a build in the source CI pipeline to see the images available for deployment in the linked CI pipeline's CD stage."})}),"\n",(0,s.jsx)(i.h3,{id:"3-deploy-image-from-external-service",children:"3. Deploy Image from External Service"}),"\n",(0,s.jsx)(i.p,{children:"For CI pipeline, you can receive container images from an external services via webhook API."}),"\n",(0,s.jsx)(i.p,{children:"You can use Devtron for deployments on Kubernetes while using an external CI tool such as Jenkins or CircleCI. External CI feature can be used when the CI tool is hosted outside the Devtron platform. However, by using an external CI, you will not be able to use some of the Devtron features such as Image scanning and security policies, configuring pre-post CI stages etc."}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["Create a ",(0,s.jsx)(i.a,{href:"/docs/user-guide/create-application",children:"new"})," or ",(0,s.jsx)(i.a,{href:"/docs/user-guide/cloning-application",children:"clone"})," an application."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["To configure ",(0,s.jsx)(i.code,{children:"Git Repository"}),", you can add any Git repository account (e.g., dummy account) and click ",(0,s.jsx)(i.strong,{children:"Next"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["To configure the ",(0,s.jsx)(i.code,{children:"Container Registry"})," and ",(0,s.jsx)(i.code,{children:"Container Repository"}),", you can leave the fields blank or simply add any test repository and click ",(0,s.jsx)(i.strong,{children:"Save & Next"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["On the ",(0,s.jsx)(i.code,{children:"Base Deployment Template"})," page, select the ",(0,s.jsx)(i.code,{children:"Chart type"})," from the drop-down list and configure as per your ",(0,s.jsx)(i.a,{href:"/docs/user-guide/creating-application/deployment-template",children:"requirements"})," and click ",(0,s.jsx)(i.strong,{children:"Save & Next"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["On the ",(0,s.jsx)(i.strong,{children:"Workflow Editor"})," page, click ",(0,s.jsx)(i.strong,{children:"New Workflow"})," and select ",(0,s.jsx)(i.strong,{children:"Deploy image from external service"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["On the ",(0,s.jsx)(i.strong,{children:"Deploy image from external source"})," page, provide the information in the following fields:"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/deploy-image-from-external-source.jpg",alt:""})}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Fields"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.strong,{children:"Deploy to environment"})}),(0,s.jsx)(i.td,{children:(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)(i.code,{children:"Environment"}),": Provide the name of the ",(0,s.jsx)(i.a,{href:"../../global-configurations/cluster-and-environments#add-environment-to-a-cluster",children:"environment"}),"."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)(i.code,{children:"Namespace"}),": Provide the ",(0,s.jsx)(i.a,{href:"../../global-configurations/cluster-and-environments#add-environment-to-a-cluster",children:"namespace"}),"."]})]})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.strong,{children:"When do you want to deploy"})}),(0,s.jsxs)(i.td,{children:["You can deploy either in one of the following ways: ",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)(i.code,{children:"Automatic"}),": If you select automatic, your application will be deployed automatically everytime a new image is received."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)(i.code,{children:"Manual"}),": In case of manual, you have to select the image and deploy manually. "]})]})]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.strong,{children:"Deployment Strategy"})}),(0,s.jsx)(i.td,{children:"Configure the deployment preferences for this pipeline."})]})]})]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Click ",(0,s.jsx)(i.strong,{children:"Create Pipeline"}),".\nA new CI pipeline will be created for the external source.\nTo get the webhook URL and JSON sample payload to be used in external CI pipeline, click ",(0,s.jsx)(i.strong,{children:"Show webhook details"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/webhook-ci/show-webhook-details-v2.jpg",alt:""})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["On the ",(0,s.jsx)(i.strong,{children:"Webhook Details"})," page, you have to authenticate via ",(0,s.jsx)(i.code,{children:"API token"})," to allow requests from an external service (e.g. Jenkins or CircleCI)."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["For authentication, only users with ",(0,s.jsx)(i.code,{children:"super-admin"})," permissions can select or generate an API token:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["You can either use ",(0,s.jsx)(i.strong,{children:"Select API Token"})," if you have generated an ",(0,s.jsx)(i.a,{href:"/docs/user-guide/global-configurations/authorization/api-tokens",children:"API Token"})," under ",(0,s.jsx)(i.strong,{children:"Global Configurations"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/webhook-ci/select-api-token-webhook-details-v2.jpg",alt:""})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Or use ",(0,s.jsx)(i.strong,{children:"Auto-generate token"})," to generate the API token with the required permissions. Make sure to enter the token name in the ",(0,s.jsx)(i.strong,{children:"Token name"})," field."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/webhook-ci/auto-generate-token-webhook-details-v2.jpg",alt:""})}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"To allow requests from the external source, you can request the API by using:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.strong,{children:"Webhook URL"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.strong,{children:"cURL Request"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h4,{id:"webhook-url",children:"Webhook URL"}),"\n",(0,s.jsxs)(i.p,{children:["HTTP Method: ",(0,s.jsx)(i.code,{children:"POST"})]}),"\n",(0,s.jsxs)(i.p,{children:["API Endpoint: ",(0,s.jsx)(i.code,{children:"https://{domain-name}/orchestrator/webhook/ext-ci/{pipeline-id}"})]}),"\n",(0,s.jsx)(i.p,{children:"JSON Payload:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:'    {\n    "dockerImage": "445808685819.dkr.ecr.us-east-2.amazonaws.com/orch:23907713-2"\n}\n'})}),"\n",(0,s.jsx)(i.p,{children:"You can also select metadata to send to Devtron. Sample JSON will be generated accordingly.\nYou can send the Payload script to your CI tools such as Jenkins and Devtron will receive the build image every time the CI pipeline is triggered or you can use the Webhook URL, which will build an image every time CI pipeline is triggered using Devtron Dashboard."}),"\n",(0,s.jsx)(i.h4,{id:"sample-curl-request",children:"Sample cURL Request"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"curl --location --request POST \\\n'https://{domain-name}/orchestrator/webhook/ext-ci/{pipeline-id}' \\\n--header 'Content-Type: application/json' \\\n--header 'token: {token}' \\\n--data-raw '{\n    \"dockerImage\": \"445808685819.dkr.ecr.us-east-2.amazonaws.com/orch:23907713-2\"\n}'\n"})}),"\n",(0,s.jsx)(i.h4,{id:"response-codes",children:"Response Codes"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Code"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"200"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"app detail page url"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"400"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"Bad request"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"401"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"Unauthorized"})})]})]})]}),"\n",(0,s.jsx)(i.h4,{id:"integrate-with-external-sources---jenkins-or-circleci",children:"Integrate with External Sources - Jenkins or CircleCI"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"On the Jenkins dashboard, select the Jenkins job which you want to integrate with the Devtron dashboard."}),"\n",(0,s.jsxs)(i.li,{children:["Go to the ",(0,s.jsx)(i.strong,{children:"Configuration"})," > ",(0,s.jsx)(i.strong,{children:"Build Steps"}),", click ",(0,s.jsx)(i.strong,{children:"Add build step"}),", and then click ",(0,s.jsx)(i.strong,{children:"Execute Shell"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/webhook-ci/add-build-step-jenkins-v2.jpg",alt:""})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Enter the cURL request command."}),"\n",(0,s.jsxs)(i.li,{children:["Make sure to enter the ",(0,s.jsx)(i.code,{children:"API token"})," and ",(0,s.jsx)(i.code,{children:"dockerImage"})," in your cURL command and click ",(0,s.jsx)(i.strong,{children:"Save"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/webhook-ci/execute-shell-jenkins-v2.jpg",alt:""})}),"\n",(0,s.jsxs)(i.p,{children:["Now, you can access the images on the Devtron dashboard and deploy manually. In case, if you select ",(0,s.jsx)(i.strong,{children:"Automatic"})," deployment option, then your application will be deployed automatically everytime a new image is received."]}),"\n",(0,s.jsxs)(i.p,{children:["Similarly, you can also integrate with external source such as ",(0,s.jsx)(i.strong,{children:"CircleCI"})," by:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Select the job on the ",(0,s.jsx)(i.code,{children:"CircleCI"})," dashboard and click ",(0,s.jsx)(i.code,{children:"Configuration File"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["On the respective job, enter the ",(0,s.jsx)(i.code,{children:"cURL"})," command and update the ",(0,s.jsx)(i.code,{children:"API token"})," and ",(0,s.jsx)(i.code,{children:"dockerImage"})," in your cURL command."]}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"updating-ci-pipeline",children:"Updating CI Pipeline"}),"\n",(0,s.jsxs)(i.p,{children:["You can update the configurations of an existing CI Pipeline except for the pipeline's name.\nTo update a pipeline, select your CI pipeline.\nIn the ",(0,s.jsx)(i.strong,{children:"Edit build pipeline"})," window, edit the required stages and select ",(0,s.jsx)(i.strong,{children:"Update Pipeline"}),"."]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/update-pipeline.jpg",alt:""})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"deleting-ci-pipeline",children:"Deleting CI Pipeline"}),"\n",(0,s.jsx)(i.p,{children:"You can only delete a CI pipeline if there is no CD pipeline created in your workflow."}),"\n",(0,s.jsxs)(i.p,{children:["To delete a CI pipeline, go to ",(0,s.jsx)(i.strong,{children:"App Configurations > Workflow Editor"})," and select ",(0,s.jsx)(i.strong,{children:"Delete Pipeline"}),"."]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/delete-pipeline.jpg",alt:""})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"extras",children:"Extras"}),"\n",(0,s.jsx)(i.h3,{id:"configuring-webhook",children:"Configuring Webhook"}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.p,{children:["If you choose ",(0,s.jsx)(i.a,{href:"#pull-request",children:"Pull Request"})," or ",(0,s.jsx)(i.a,{href:"#tag-creation",children:"Tag Creation"})," as the ",(0,s.jsx)(i.a,{href:"#source-type",children:"source type"}),", you must first configure the Webhook for GitHub/Bitbucket as a prerequisite step."]})}),"\n",(0,s.jsx)(i.h4,{id:"for-github",children:"For GitHub"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["Go to the ",(0,s.jsx)(i.strong,{children:"Settings"})," page of your repository and select ",(0,s.jsx)(i.strong,{children:"Webhooks"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Select ",(0,s.jsx)(i.strong,{children:"Add webhook"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["In the ",(0,s.jsx)(i.strong,{children:"Payload URL"}),' field, enter the Webhook URL that you get on selecting the source type as "Pull Request" or "Tag Creation" in Devtron the dashboard.']}),"\n",(0,s.jsxs)(i.li,{children:["Change the Content-type to ",(0,s.jsx)(i.code,{children:"application/json"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["In the ",(0,s.jsx)(i.strong,{children:"Secret"}),' field, enter the secret from Devtron the dashboard when you select the source type as "Pull Request" or "Tag Creation".']}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-pipeline-4.jpg",alt:""})}),"\n",(0,s.jsxs)(i.ol,{start:"6",children:["\n",(0,s.jsxs)(i.li,{children:["Under ",(0,s.jsx)(i.strong,{children:"Which events would you like to trigger this webhook?"}),", select ",(0,s.jsx)(i.strong,{children:"Let me select individual events."})," to trigger the webhook to build CI Pipeline."]}),"\n",(0,s.jsxs)(i.li,{children:["Select ",(0,s.jsx)(i.strong,{children:"Branch or tag creation"})," and ",(0,s.jsx)(i.strong,{children:"Pull Requests"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Select ",(0,s.jsx)(i.strong,{children:"Add webhook"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.h4,{id:"for-bitbucket-cloud",children:"For Bitbucket Cloud"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["Go to the ",(0,s.jsx)(i.strong,{children:"Repository settings"})," page of your Bitbucket repository."]}),"\n",(0,s.jsxs)(i.li,{children:["Select ",(0,s.jsx)(i.strong,{children:"Webhooks"})," and then select ",(0,s.jsx)(i.strong,{children:"Add webhook"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-pipeline-6.jpg",alt:""})}),"\n",(0,s.jsxs)(i.ol,{start:"3",children:["\n",(0,s.jsxs)(i.li,{children:["Enter a ",(0,s.jsx)(i.strong,{children:"Title"})," for the webhook."]}),"\n",(0,s.jsxs)(i.li,{children:["In the ",(0,s.jsx)(i.strong,{children:"URL"}),' field, enter the Webhook URL that you get on selecting the source type as "Pull Request" or "Tag Creation" in the Devtron dashboard.']}),"\n",(0,s.jsx)(i.li,{children:"Select the event triggers for which you want to trigger the webhook."}),"\n",(0,s.jsxs)(i.li,{children:["Select ",(0,s.jsx)(i.strong,{children:"Save"})," to save your configurations."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-pipeline-7.jpg",alt:""})})]})}function h(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>r,x:()=>o});var t=n(6540);const s={},l=t.createContext(s);function r(e){const i=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(l.Provider,{value:i},e.children)}}}]);