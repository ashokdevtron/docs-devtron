"use strict";(self.webpackChunkdocdevtron=self.webpackChunkdocdevtron||[]).push([[7182],{8453:(e,r,s)=>{s.d(r,{R:()=>o,x:()=>c});var i=s(6540);const t={},n=i.createContext(t);function o(e){const r=i.useContext(n);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(n.Provider,{value:r},e.children)}},9653:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"user-guide/global-configurations/container-registries","title":"Container/OCI Registry","description":"Introduction","source":"@site/docs/user-guide/global-configurations/container-registries.md","sourceDirName":"user-guide/global-configurations","slug":"/user-guide/global-configurations/container-registries","permalink":"/docs-devtron/docs/user-guide/global-configurations/container-registries","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Clusters and Environments","permalink":"/docs-devtron/docs/user-guide/global-configurations/cluster-and-environments"},"next":{"title":"README","permalink":"/docs-devtron/docs/user-guide/global-configurations/authorization/"}}');var t=s(4848),n=s(8453);const o={},c="Container/OCI Registry",d={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Add Container Registry",id:"add-container-registry",level:2},{value:"Steps",id:"steps",level:3},{value:"Push Helm Packages",id:"push-helm-packages",level:3},{value:"Tutorial",id:"tutorial",level:4},{value:"Steps",id:"steps-1",level:4},{value:"Supported Registry Providers",id:"supported-registry-providers",level:2},{value:"ECR",id:"ecr",level:3},{value:"Docker",id:"docker",level:3},{value:"Azure",id:"azure",level:3},{value:"Artifact Registry (GCP)",id:"artifact-registry-gcp",level:3},{value:"Google Container Registry (GCR)",id:"google-container-registry-gcr",level:3},{value:"Quay",id:"quay",level:3},{value:"Other",id:"other",level:3},{value:"Registry Credential Access",id:"registry-credential-access",level:2},{value:"Use Registry Credentials",id:"use-registry-credentials",level:3},{value:"Specify Image Pull Secret",id:"specify-image-pull-secret",level:3},{value:"Delete an OCI Registry",id:"delete-an-oci-registry",level:2}];function a(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"containeroci-registry",children:"Container/OCI Registry"})}),"\n",(0,t.jsx)(r.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsxs)(r.p,{children:["While ",(0,t.jsx)(r.a,{href:"/docs-devtron/docs/reference/glossary#containeroci-registry",children:"container registries"})," are typically used for storing ",(0,t.jsx)(r.a,{href:"/docs-devtron/docs/reference/glossary#image",children:"images"})," built by the CI Pipeline, an OCI registry can store container images as well as other artifacts such as ",(0,t.jsx)(r.a,{href:"/docs-devtron/docs/reference/glossary#helm-chartspackages",children:"helm charts"}),". In other words, all container registries are OCI registries, but not all OCI registries are container registries."]}),"\n",(0,t.jsx)(r.p,{children:"You can configure a container registry using any registry provider of your choice. It allows you to build, deploy, and manage your container images or charts with easy-to-use UI."}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"add-container-registry",children:"Add Container Registry"}),"\n",(0,t.jsx)(r.h3,{id:"steps",children:"Steps"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["From the left sidebar, go to ",(0,t.jsx)(r.strong,{children:"Global Configurations"})," \u2192 ",(0,t.jsx)(r.strong,{children:"Container/OCI Registry"}),"."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/container-registries/add-registry.jpg",alt:"Figure 1: Container/OCI Registry"})}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Click ",(0,t.jsx)(r.strong,{children:"Add Registry"}),"."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/container-registries/add-container-registry-1.jpg",alt:"Figure 2: Add a Registry"})}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Choose a provider from the ",(0,t.jsx)(r.strong,{children:"Registry provider"})," dropdown. View the ",(0,t.jsx)(r.a,{href:"#supported-registry-providers",children:"Supported Registry Providers"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Choose the Registry type:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Private Registry"}),": Choose this if your images or artifacts are hosted or should be hosted on a private registry restricted to authenticated users of that registry. Selecting this option requires you to enter your registry credentials (username and password/token)."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Public Registry"}),": Unlike private registry, this doesn't require your registry credentials. Only the registry URL and repository name(s) would suffice."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Assuming your registry type is private, here are few of the common fields you can expect:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Fields"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Name"})}),(0,t.jsxs)(r.td,{children:["Provide a name to your registry, this name will appear in the ",(0,t.jsx)(r.strong,{children:"Container Registry"})," drop-down list available within the ",(0,t.jsx)(r.a,{href:"/docs-devtron/docs/user-guide/creating-application/docker-build-configuration",children:"Build Configuration"})," section of your application"]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Registry URL"})}),(0,t.jsxs)(r.td,{children:["Provide the URL of your registry in case it doesn't come prefilled (do not include ",(0,t.jsx)(r.code,{children:"oci://"}),", ",(0,t.jsx)(r.code,{children:"http://"}),", or ",(0,t.jsx)(r.code,{children:"/https://"})," in the URL)"]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Authentication Type"})}),(0,t.jsxs)(r.td,{children:["The credential input fields may differ depending on the registry provider, check ",(0,t.jsx)(r.a,{href:"#supported-registry-providers",children:"Registry Providers"})]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Push container images"})}),(0,t.jsxs)(r.td,{children:["Tick this checkbox if you wish to use the repository to push container images. This comes selected by default and you may untick it if you don't intend to push container images after a CI build. If you wish to to use the same repository to pull container images too, read ",(0,t.jsx)(r.a,{href:"#registry-credential-access",children:"Registry Credential Access"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Push helm packages"})}),(0,t.jsxs)(r.td,{children:["Tick this checkbox if you wish to ",(0,t.jsx)(r.a,{href:"#push-helm-packages",children:"push helm charts to your OCI registry"})]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Use as chart repository"})}),(0,t.jsx)(r.td,{children:"Tick this checkbox if you want Devtron to pull helm charts from your registry and display them on chart store. Also, you will have to provide a list of repositories (present within your registry) for Devtron to successfully pull the helm charts."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Set as default registry"})}),(0,t.jsx)(r.td,{children:"Tick this checkbox to set your registry as the default registry hub for your images or artifacts"})]})]})]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Click ",(0,t.jsx)(r.strong,{children:"Save"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"push-helm-packages",children:"Push Helm Packages"}),"\n",(0,t.jsx)(r.p,{children:"Upon enabling this option, Devtron supports the pushing of helm charts to your OCI registry."}),"\n",(0,t.jsxs)(r.p,{children:["This is possible through ",(0,t.jsx)(r.a,{href:"/docs-devtron/docs/user-guide/global-configurations/cluster-and-environments#add-isolated-cluster-",children:"isolated clusters"})," that facilitate air-gapped deployments. In other words, it generates a helm package that you can use to deploy your application in air-gapped clusters."]}),"\n",(0,t.jsxs)(r.p,{children:["If you have ",(0,t.jsx)(r.a,{href:"/docs-devtron/docs/user-guide/creating-application/workflow/cd-pipeline",children:"configured your CD pipeline"})," to push the helm package to your OCI registry, you can view the pushed helm package in your registry as shown below:"]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/use-cases/oci-push/pushed-artifacts.jpg",alt:"Figure 3a: OCI Registry Page"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/use-cases/oci-push/helm-chart.jpg",alt:"Figure 3b: Pushed Helm Chart"})}),"\n",(0,t.jsx)(r.admonition,{title:"Prerequisite",type:"info",children:(0,t.jsxs)(r.p,{children:["OCI registry with ",(0,t.jsx)(r.code,{children:"Use as chart repository"})," option enabled."]})}),"\n",(0,t.jsx)(r.p,{children:"Unlike Helm repos, OCI registries do not have an index file to discover all the charts. If you have helm packages pushed to your OCI registry, you can that registry as a chart repository."}),"\n",(0,t.jsxs)(r.p,{children:["Upon enabling this option, Devtron can use your OCI registry as the chart source and pull the helm charts to display them on your ",(0,t.jsx)(r.a,{href:"/docs-devtron/docs/user-guide/deploy-chart/",children:"Chart Store"})," for easy deployment."]}),"\n",(0,t.jsx)(r.h4,{id:"tutorial",children:"Tutorial"}),"\n",(0,t.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/9imC5MMz9gs",title:"Pulling Charts from an OCI Registry to Devtron",frameborder:"0",allowfullscreen:!0}),"\n",(0,t.jsx)(r.h4,{id:"steps-1",children:"Steps"}),"\n",(0,t.jsx)(r.p,{children:"Search your OCI registry in the list and click it."}),"\n",(0,t.jsxs)(r.p,{children:["In the ",(0,t.jsx)(r.strong,{children:"List of repositories"})," field, add your chart repo(s). You can ",(0,t.jsx)(r.a,{href:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/use-cases/oci-pull/find-username.jpg",children:"find the username"})," from your registry provider account."]}),"\n",(0,t.jsx)(r.h2,{id:"supported-registry-providers",children:"Supported Registry Providers"}),"\n",(0,t.jsx)(r.h3,{id:"ecr",children:"ECR"}),"\n",(0,t.jsx)(r.p,{children:"Amazon ECR is an AWS-managed container image registry service.\nThe ECR provides resource-based permissions to the private repositories using AWS Identity and Access Management (IAM). ECR allows both Key-based and Role-based authentications."}),"\n",(0,t.jsxs)(r.p,{children:["Before you begin, create an ",(0,t.jsx)(r.a,{href:"https://docs.aws.amazon.com/AmazonECR/latest/userguide/get-set-up-for-amazon-ecr.html",children:"IAM user"})," and attach the ECR policy according to the authentication type."]}),"\n",(0,t.jsx)(r.p,{children:"Provide the following additional information apart from the common fields:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Fields"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Registry URL"})}),(0,t.jsxs)(r.td,{children:["Example of URL format: ",(0,t.jsx)(r.code,{children:"xxxxxxxxxxxx.dkr.ecr.<region>.amazonaws.com"})," where ",(0,t.jsx)(r.code,{children:"xxxxxxxxxxxx"})," is your 12-digit AWS account ID"]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Authentication Type"})}),(0,t.jsxs)(r.td,{children:["Select one of the authentication types:",(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)(r.strong,{children:"EC2 IAM Role"}),": Authenticate with workernode IAM role and attach the ECR policy (AmazonEC2ContainerRegistryFullAccess) to the cluster worker nodes IAM role of your Kubernetes cluster."]}),(0,t.jsxs)("li",{children:[(0,t.jsx)(r.code,{children:"User Auth"}),": It is a key-based authentication, attach the ECR policy (AmazonEC2ContainerRegistryFullAccess) to the ",(0,t.jsx)(r.a,{href:"https://docs.aws.amazon.com/AmazonECR/latest/userguide/get-set-up-for-amazon-ecr.html",children:"IAM user"}),"."]}),(0,t.jsxs)("li",{children:[(0,t.jsx)(r.code,{children:"Access key ID"}),": Your AWS access key"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)(r.code,{children:"Secret access key"}),": Your AWS secret access key ID"]})]})]})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"docker",children:"Docker"}),"\n",(0,t.jsx)(r.p,{children:"Provide the following additional information apart from the common fields:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Fields"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Username"})}),(0,t.jsx)(r.td,{children:"Provide the username of the Docker Hub account you used for creating your registry."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Password/Token"})}),(0,t.jsxs)(r.td,{children:["Provide the password/",(0,t.jsx)(r.a,{href:"https://docs.docker.com/docker-hub/access-tokens/",children:"Token"})," corresponding to your docker hub account. It is recommended to use ",(0,t.jsx)(r.code,{children:"Token"})," for security purpose."]})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"azure",children:"Azure"}),"\n",(0,t.jsxs)(r.p,{children:["For Azure, the service principal authentication method can be used to authenticate with username and password. Visit this ",(0,t.jsx)(r.a,{href:"https://docs.microsoft.com/en-us/azure/container-registry/container-registry-auth-service-principal",children:"link"})," to get the username and password for this registry."]}),"\n",(0,t.jsx)(r.p,{children:"Provide the following additional information apart from the common fields:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Fields"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Registry URL/Login Server"})}),(0,t.jsxs)(r.td,{children:["Example of URL format: ",(0,t.jsx)(r.code,{children:"xxx.azurecr.io"})]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Username/Registry Name"})}),(0,t.jsx)(r.td,{children:"Provide the username of your Azure container registry"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Password"})}),(0,t.jsx)(r.td,{children:"Provide the password of your Azure container registry"})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"artifact-registry-gcp",children:"Artifact Registry (GCP)"}),"\n",(0,t.jsxs)(r.p,{children:["JSON key file authentication method can be used to authenticate with username and service account JSON file. Visit this ",(0,t.jsx)(r.a,{href:"https://cloud.google.com/artifact-registry/docs/docker/authentication#json-key",children:"link"})," to get the username and service account JSON file for this registry."]}),"\n",(0,t.jsxs)(r.admonition,{type:"caution",children:[(0,t.jsx)(r.mdxAdmonitionTitle,{}),(0,t.jsxs)(r.p,{children:["Remove all the white spaces from JSON key and wrap it in a single quote before pasting it in ",(0,t.jsx)(r.code,{children:"Service Account JSON File"})," field"]})]}),"\n",(0,t.jsx)(r.p,{children:"Provide the following additional information apart from the common fields:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Fields"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Registry URL"})}),(0,t.jsxs)(r.td,{children:["Example of URL format: ",(0,t.jsx)(r.code,{children:"region-docker.pkg.dev"})]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Service Account JSON File"})}),(0,t.jsx)(r.td,{children:"Paste the content of the service account JSON file"})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"google-container-registry-gcr",children:"Google Container Registry (GCR)"}),"\n",(0,t.jsxs)(r.p,{children:["JSON key file authentication method can be used to authenticate with username and service account JSON file. Please follow ",(0,t.jsx)(r.a,{href:"https://cloud.google.com/container-registry/docs/advanced-authentication#json-key",children:"link"})," to get the username and service account JSON file for this registry."]}),"\n",(0,t.jsxs)(r.admonition,{type:"caution",children:[(0,t.jsx)(r.mdxAdmonitionTitle,{}),(0,t.jsxs)(r.p,{children:["Remove all the white spaces from JSON key and wrap it in single quote before pasting it in ",(0,t.jsx)(r.code,{children:"Service Account JSON File"})," field"]})]}),"\n",(0,t.jsx)(r.h3,{id:"quay",children:"Quay"}),"\n",(0,t.jsx)(r.p,{children:"Provide the following additional information apart from the common fields:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Fields"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Username"})}),(0,t.jsx)(r.td,{children:"Provide the username of your Quay account"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Token"})}),(0,t.jsx)(r.td,{children:"Provide the password of your Quay account"})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"other",children:"Other"}),"\n",(0,t.jsxs)(r.p,{children:["Provide below information if you select the registry type as ",(0,t.jsx)(r.code,{children:"Other"}),"."]}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Fields"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Registry URL"})}),(0,t.jsx)(r.td,{children:"Enter the URL of your private registry"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Username"})}),(0,t.jsx)(r.td,{children:"Provide the username of your account where you have created your registry"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Password/Token"})}),(0,t.jsx)(r.td,{children:"Provide the password or token corresponding to the username of your registry"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Advanced Registry URL Connection Options"})}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)(r.strong,{children:"Allow Only Secure Connection"}),": Tick this option for the registry to allow only secure connections"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)(r.strong,{children:"Allow Secure Connection With CA Certificate"}),": Tick this option for the registry to allow secure connection by providing a private CA certificate (ca.crt)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)(r.strong,{children:"Allow Insecure Connection"}),": Tick this option to make an insecure communication with the registry (for e.g., when SSL certificate is expired)"]})]})})]})]})]}),"\n",(0,t.jsxs)(r.admonition,{type:"info",children:[(0,t.jsx)(r.mdxAdmonitionTitle,{}),(0,t.jsxs)(r.p,{children:["You can use any registry which can be authenticated using ",(0,t.jsx)(r.code,{children:"docker login -u <username> -p <password> <registry-url>"}),". However these registries might provide a more secured way for authentication, which we will support later."]})]}),"\n",(0,t.jsx)(r.h2,{id:"registry-credential-access",children:"Registry Credential Access"}),"\n",(0,t.jsxs)(r.p,{children:["You can create a Pod that uses a ",(0,t.jsx)(r.a,{href:"/docs-devtron/docs/reference/glossary#secrets",children:"Secret"})," to pull an image from a private container registry. You can use any private container registry of your choice, for e.g., ",(0,t.jsx)(r.a,{href:"https://www.docker.com/products/docker-hub",children:"Docker Hub"}),"."]}),"\n",(0,t.jsx)(r.p,{children:"Super-admin users can decide if they want to auto-inject registry credentials or use a secret to pull an image for deployment to environments on specific clusters."}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:["To manage the access of registry credentials, click ",(0,t.jsx)(r.strong,{children:"Manage"}),"."]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"There are two options to manage the access of registry credentials:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Fields"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Do not inject credentials to clusters"})}),(0,t.jsx)(r.td,{children:"Select the clusters for which you do not want to inject credentials"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Auto-inject credentials to clusters"})}),(0,t.jsx)(r.td,{children:"Select the clusters for which you want to inject credentials"})]})]})]}),"\n",(0,t.jsxs)(r.ol,{start:"2",children:["\n",(0,t.jsx)(r.li,{children:"You can choose one of the two options for defining credentials:"}),"\n"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#use-registry-credentials",children:"Use Registry Credentials"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#specify-image-pull-secret",children:"Specify Image Pull Secret"})}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"use-registry-credentials",children:"Use Registry Credentials"}),"\n",(0,t.jsxs)(r.p,{children:["If you select ",(0,t.jsx)(r.strong,{children:"Use Registry Credentials"}),", the clusters will be auto-injected with the registry credentials of your registry type. As an example, If you select ",(0,t.jsx)(r.code,{children:"Docker"})," as Registry Type, then the clusters will be auto-injected with the ",(0,t.jsx)(r.code,{children:"username"})," and ",(0,t.jsx)(r.code,{children:"password/token"})," which you use on the Docker Hub account."]}),"\n",(0,t.jsxs)(r.p,{children:["Click ",(0,t.jsx)(r.strong,{children:"Save"}),"."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/container-registries/use-registry-credentials-1.jpg",alt:"Figure 4: Using Registry Credentials"})}),"\n",(0,t.jsx)(r.h3,{id:"specify-image-pull-secret",children:"Specify Image Pull Secret"}),"\n",(0,t.jsx)(r.p,{children:"You can create a Secret by providing credentials on the command line."}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/container-registries/specify-image-pull-secret-1.jpg",alt:"Figure 5: Using Image Pull Secret"})}),"\n",(0,t.jsxs)(r.p,{children:["Create this Secret and name it ",(0,t.jsx)(r.code,{children:"regcred"})," (let's say):"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"kubectl create -n <namespace> secret docker-registry regcred --docker-server=<your-registry-server> --docker-username=<your-name> --docker-password=<your-pword> --docker-email=<your-email>\n"})}),"\n",(0,t.jsx)(r.p,{children:"where,"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"namespace"})," is your sub-cluster, e.g., devtron-demo"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"your-registry-server"})," is your Private Docker Registry FQDN. Use ",(0,t.jsx)(r.a,{href:"https://index.docker.io/v1/",children:"https://index.docker.io/v1/"})," for Docker Hub."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"your-name"})," is your Docker username"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"your-pword"})," is your Docker password"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"your-email"})," is your Docker email"]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["You have successfully set your Docker credentials in the cluster as a Secret called ",(0,t.jsx)(r.code,{children:"regcred"}),"."]}),"\n",(0,t.jsxs)(r.admonition,{type:"caution",children:[(0,t.jsx)(r.mdxAdmonitionTitle,{}),(0,t.jsx)(r.p,{children:"Typing secrets on the command line may store them in your shell history unprotected, and those secrets might also be visible to other users on your PC during the time when kubectl is running."})]}),"\n",(0,t.jsxs)(r.p,{children:["Enter the Secret name in the field and click ",(0,t.jsx)(r.strong,{children:"Save"}),"."]}),"\n",(0,t.jsx)(r.h2,{id:"delete-an-oci-registry",children:"Delete an OCI Registry"}),"\n",(0,t.jsx)(r.p,{children:"If you prefer to delete an OCI registry, follow the instructions below:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Navigate back to ",(0,t.jsx)(r.strong,{children:"Container/OCI Registry"})," page."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploy-chart/delete-oci-registry.jpg",alt:"Figure 6: Delete an OCI Registry"})}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Select your preferred OCI registry."}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Click the ",(0,t.jsx)(r.strong,{children:"Delete"})," button. The OCI registry will be deleted."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.admonition,{title:"Important Note",type:"caution",children:(0,t.jsx)(r.p,{children:"If you used an OCI registry as a chart source, deleting the OCI registry will remove all its associated charts from the Chart Store."})})]})}function h(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);