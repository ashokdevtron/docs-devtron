"use strict";(self.webpackChunkdocdevtron=self.webpackChunkdocdevtron||[]).push([[7992],{4488:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>t,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"user-guide/deploying-application/triggering-cd","title":"Triggering CD Pipelines","description":"After the CI pipeline is complete, you can trigger the CD pipeline.","source":"@site/docs/user-guide/deploying-application/triggering-cd.md","sourceDirName":"user-guide/deploying-application","slug":"/user-guide/deploying-application/triggering-cd","permalink":"/docs-devtron/docs/user-guide/deploying-application/triggering-cd","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Triggering CI Pipelines","permalink":"/docs-devtron/docs/user-guide/deploying-application/triggering-ci"},"next":{"title":"Rollback Deployment","permalink":"/docs-devtron/docs/user-guide/deploying-application/rollback-deployment"}}');var o=n(4848),r=n(8453);const t={},a="Triggering CD Pipelines",l={},p=[{value:"Reviewing Configuration Differences",id:"reviewing-configuration-differences",level:2},{value:"Manual Approval for Deployment <a></a>",id:"manual-approval-for-deployment-",level:2},{value:"Requesting for Image Approval",id:"requesting-for-image-approval",level:3},{value:"Extras",id:"extras",level:2},{value:"Accepting Image Approval Request",id:"accepting-image-approval-request",level:3},{value:"Deploying Approved Image",id:"deploying-approved-image",level:3}];function c(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"triggering-cd-pipelines",children:"Triggering CD Pipelines"})}),"\n",(0,o.jsxs)(i.p,{children:["After the ",(0,o.jsx)(i.a,{href:"/docs-devtron/docs/user-guide/deploying-application/triggering-ci",children:"CI pipeline"})," is complete, you can trigger the CD pipeline."]}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["Go to the ",(0,o.jsx)(i.code,{children:"Build & Deploy"})," tab of your application and click ",(0,o.jsx)(i.strong,{children:"Select Image"})," in the CD pipeline."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/select-image.jpg",alt:"Figure 1: 'Select Image' Button"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Select an image for deployment."}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/deploy-v2.jpg",alt:"Figure 2: Selecting an Image for Deployment"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(i.p,{children:["However, if an image is already deployed, you can identify it by the tag ",(0,o.jsx)(i.code,{children:"Active on <Environment name>"}),"."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/active-tag.jpg",alt:"Figure 3: Currently Deployed Image"})}),"\n",(0,o.jsxs)(i.ol,{start:"3",children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"If in any scenario, such as deploying a hotfix, if you need to use a different deployment strategy other than the default, you can select a different deployment strategy."}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Note:"})," You can only select the deployment strategies that are configured for that pipeline. Refer to the ",(0,o.jsx)(i.a,{href:"/docs-devtron/docs/user-guide/creating-application/workflow/cd-pipeline#configure-deployment-strategies",children:"CD Pipeline"})," to learn more."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/app-details/deployment-build.jpg",alt:"Figure 4: Selecting Deployment Strategy"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["In case you have made any changes in the environment configurations (such as changing deployment strategy, modifying ConfigMaps & Secrets, etc.) since the last deployment, use the ",(0,o.jsx)(i.strong,{children:"Config Diff"})," button to compare the new configurations with the last deployed configurations before deploying. Refer to ",(0,o.jsx)(i.a,{href:"#reviewing-configuration-differences",children:"Reviewing Configurations Differences"})," to learn more."]}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["Click ",(0,o.jsx)(i.strong,{children:"Deploy"})," to trigger the CD pipeline."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"reviewing-configuration-differences",children:"Reviewing Configuration Differences"}),"\n",(0,o.jsxs)(i.p,{children:["Before triggering a deployment, if you\u2019ve made any changes to the environment configurations, you can review the configuration differences between your ",(0,o.jsx)(i.strong,{children:"Last Deployed Configurations"})," (old configurations) and your ",(0,o.jsx)(i.strong,{children:"Last Saved Configurations"})," (new configurations) by clicking the ",(0,o.jsx)(i.strong,{children:"Config Diff"})," button. After reviewing, you can choose whether to deploy using the updated configurations or stick with the previously deployed ones."]}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["Click the ",(0,o.jsx)(i.strong,{children:"Config Diff"})," button to review the changes; a modal window will appear."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/config-diff-click.jpg",alt:"Figure 5: Clicking 'Config Diff' button"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["You can compare configuration differences for various resources, including the ",(0,o.jsx)(i.strong,{children:"Deployment template"}),", ",(0,o.jsx)(i.strong,{children:"Pipeline Configurations"}),", ",(0,o.jsx)(i.strong,{children:"ConfigMaps"}),", and ",(0,o.jsx)(i.strong,{children:"Secrets"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["To compare changes for a specific resource, select it from the left side of the modal window under ",(0,o.jsx)(i.strong,{children:"Deployment Configurations"}),"."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/config-diff-modal.jpg",alt:"Figure 6: Selecting Resource"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["The right panel displays a side-by-side comparison between the ",(0,o.jsx)(i.strong,{children:"Last Deployed"})," and ",(0,o.jsx)(i.strong,{children:"Last Saved"})," configurations for the selected resource. You can review the configuration differences for each resource before triggering the deployment."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/config-diff-deployment-template.jpg",alt:"Figure 7a: Comparing Deployment Template"})}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/config-diff-pipeline-config.jpg",alt:"Figure 7b: Comparing Pipeline Configurations"})}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/config-diff-configmap.jpg",alt:"Figure 7c: Comparing ConfigMaps"})}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/config-diff-secret.jpg",alt:"Figure 7d: Comparing Secrets"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["After reviewing, select whether you want to trigger the deployment with ",(0,o.jsx)(i.strong,{children:"Last Saved Config"})," (new configurations) or ",(0,o.jsx)(i.strong,{children:"Last Deploy Config"})," (old configurations)."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/config-diff-select-config.jpg",alt:"Figure 8: Selecting Configuration For Deployment"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["Select ",(0,o.jsx)(i.strong,{children:"Deploy"})," to trigger the deployment."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/config-diff-deploy.jpg",alt:"Figure 9: Triggering The Deployment"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(i.h2,{id:"manual-approval-for-deployment-",children:["Manual Approval for Deployment ",(0,o.jsx)("a",{href:"https://devtron.ai/pricing",children:(0,o.jsx)("img",{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",className:"enterprise-badge-img"})})]}),"\n",(0,o.jsxs)(i.p,{children:["When ",(0,o.jsx)(i.a,{href:"/docs-devtron/docs/user-guide/global-configurations/approval-policy",children:"manual approval is enabled"})," for the deployment pipeline configured in the workflow, you are expected to request for an image approval before each deployment. Alternatively, you can deploy images that have already been approved once."]}),"\n",(0,o.jsxs)(i.p,{children:["If no approved images are available or the current image is already deployed, you won't see any images for deployment when clicking ",(0,o.jsx)(i.strong,{children:"Select Image"}),"."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/no-approved-image-v2.jpg",alt:"Figure 10: No Approved Image"})}),"\n",(0,o.jsx)(i.h3,{id:"requesting-for-image-approval",children:"Requesting for Image Approval"}),"\n",(0,o.jsxs)(i.p,{children:["Users need to have ",(0,o.jsx)(i.a,{href:"/docs-devtron/docs/user-guide/global-configurations/authorization/user-access#devtron-apps-permissions",children:"Build & deploy permission"})," or above (along with access to the environment and application) to request for an image approval."]}),"\n",(0,o.jsx)(i.p,{children:"To request an image approval, follow these steps:"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["Navigate to the ",(0,o.jsx)(i.code,{children:"Build & Deploy"})," page, and click the ",(0,o.jsx)(i.strong,{children:"Approval for deployment"})," icon."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/deployment-approval-button-v2.jpg",alt:"Figure 11: Approval Button"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["Click the ",(0,o.jsx)(i.strong,{children:"Request Approval"})," button present on the image for which you want to request an approval and click ",(0,o.jsx)(i.strong,{children:"Submit Request"}),"."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/request-approval-v2.jpg",alt:"Figure 12: Requesting Approval"})}),"\n",(0,o.jsxs)(i.p,{children:["In case you have configured ",(0,o.jsx)(i.a,{href:"/docs-devtron/docs/user-guide/global-configurations/manage-notification#configurations",children:"SES or SMTP on Devtron"}),", you can directly choose the approver(s) from the list of approvers as shown below."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/approver-list-v2.jpg",alt:"Figure 13: Choosing Approvers"})}),"\n",(0,o.jsx)(i.p,{children:"The users you selected will receive an approval request via email. Any user with 'Image approver' permission alongwith access to the given application and given environment would be able to approve the image."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"extras",children:"Extras"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["In case you wish to cancel the image approval request, you can do so from the ",(0,o.jsx)(i.code,{children:"Approval pending"})," tab as shown in the below image."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/cancel-approval.jpg",alt:"Figure 14: Cancelling Request"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"If you've received an approval but no longer want the image to be deployable, you can let the approval expire."}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/expire-approval.jpg",alt:"Figure 15: Expiring an Approval"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"accepting-image-approval-request",children:"Accepting Image Approval Request"}),"\n",(0,o.jsx)(i.p,{children:"By default, super-admin users are considered as the default approvers. Users who build the image and/or request for its approval, cannot self-approve it even if they have super-admin privileges."}),"\n",(0,o.jsxs)(i.p,{children:["Users with ",(0,o.jsx)(i.code,{children:"Approver"})," permission (for the specific application and environment) can also approve a deployment. This permission can be granted to users from ",(0,o.jsx)(i.a,{href:"/docs-devtron/docs/user-guide/global-configurations/authorization/user-access#devtron-apps-permissions",children:(0,o.jsx)(i.code,{children:"User Permissions"})})," present in ",(0,o.jsx)(i.a,{href:"/docs-devtron/docs/user-guide/global-configurations/",children:"Global Configurations"}),"."]}),"\n",(0,o.jsxs)(i.p,{children:["In case ",(0,o.jsx)(i.a,{href:"/docs-devtron/docs/user-guide/global-configurations/manage-notification#email-ses-configuration",children:"SES"})," or ",(0,o.jsx)(i.a,{href:"/docs-devtron/docs/user-guide/global-configurations/manage-notification#email-smtp-configuration",children:"SMTP"})," was configured in Devtron, and the user chose the approvers while raising an image approval request, the approvers would receive an email notification as shown below:"]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/email-notification.jpg",alt:"Figure 16: Email Notification to the Approver"})}),"\n",(0,o.jsx)(i.p,{children:"To approve an image approval request, follow these steps:"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["Go to the ",(0,o.jsx)(i.code,{children:"Build & Deploy"})," page and click the ",(0,o.jsx)(i.code,{children:"Approval for deployment"})," button."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/deployment-approval-button-v2.jpg",alt:"Figure 17: Approval Button"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["Switch to the ",(0,o.jsx)(i.code,{children:"Approval pending"})," tab. Here, you will get a list of images that are awaiting approval."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/approval-pending-tab.jpg",alt:"Figure 18: List of Pending Approvals"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["Click ",(0,o.jsx)(i.strong,{children:"Approve"})," followed by ",(0,o.jsx)(i.strong,{children:"Approve Request"})," button."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/approve-request-v2.jpg",alt:"Figure 19: Approving a Request"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"deploying-approved-image",children:"Deploying Approved Image"}),"\n",(0,o.jsxs)(i.p,{children:["Users need to have ",(0,o.jsx)(i.a,{href:"/docs-devtron/docs/user-guide/global-configurations/authorization/user-access#devtron-apps-permissions",children:"Build & deploy permission"})," or above (along with access to the respective environment and application) to select and deploy an approved image."]}),"\n",(0,o.jsxs)(i.p,{children:["In case the super-admin has set the minimum number of approval to more than 1 (in ",(0,o.jsx)(i.a,{href:"/docs-devtron/docs/user-guide/global-configurations/approval-policy",children:"Approval Policy"}),"), you must wait for all approvals before deploying the image. In other words, partially approved image will not be eligible for deployment."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/approval-count-v2.jpg",alt:"Figure 20: Approval Count"})}),"\n",(0,o.jsx)(i.p,{children:"To deploy an approved image, follow these steps:"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["Navigate to the ",(0,o.jsx)(i.code,{children:"Build & Deploy"})," tab and click ",(0,o.jsx)(i.strong,{children:"Select Image"}),"."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/select-image.jpg",alt:"Figure 21: Select Image Button"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["You will find all the approved images listed under the ",(0,o.jsx)(i.code,{children:"Approved images"})," section. From the list, you can select the desired image and deploy it to your environment."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/approved-images-v2.jpg",alt:"Figure 22: List of Approved Images"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["You can view the status of current deployment in the ",(0,o.jsx)(i.code,{children:"App Details"})," tab."]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/deploying-application/triggering-cd/app-status-v2.jpg",alt:"Figure 23: 'App Details' Screen"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(i.p,{children:["The status initially appears as ",(0,o.jsx)(i.code,{children:"Progressing"})," for approximately 1-2 minutes, and then gradually transitions to ",(0,o.jsx)(i.code,{children:"Healthy"})," state based on the deployment strategy."]}),"\n",(0,o.jsxs)(i.p,{children:["Here, our CD pipeline trigger was successful, and the deployment is in ",(0,o.jsx)(i.code,{children:"Healthy"})," state."]})]})}function d(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>t,x:()=>a});var s=n(6540);const o={},r=s.createContext(o);function t(e){const i=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);