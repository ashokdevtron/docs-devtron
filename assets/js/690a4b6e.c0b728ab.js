"use strict";(self.webpackChunkdocdevtron=self.webpackChunkdocdevtron||[]).push([[7388],{6903:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"user-guide/global-configurations/tags-policy","title":"Tags Policy","description":"Introduction","source":"@site/docs/user-guide/global-configurations/tags-policy.md","sourceDirName":"user-guide/global-configurations","slug":"/user-guide/global-configurations/tags-policy","permalink":"/docs-devtron/docs/user-guide/global-configurations/tags-policy","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Pull Image Digest","permalink":"/docs-devtron/docs/user-guide/global-configurations/pull-image-digest"},"next":{"title":"Filter Condition","permalink":"/docs-devtron/docs/user-guide/global-configurations/filter-condition"}}');var a=s(4848),i=s(8453);const o={},r="Tags Policy",l={},c=[{value:"Introduction",id:"introduction-",level:2},{value:"Adding Tag Policy",id:"adding-tag-policy",level:2},{value:"Editing a Tag",id:"editing-a-tag",level:2},{value:"Editing in Bulk",id:"editing-in-bulk",level:3},{value:"Deleting a Tag",id:"deleting-a-tag",level:2},{value:"Results",id:"results",level:2},{value:"Appearance of Mandatory Tags",id:"appearance-of-mandatory-tags",level:3},{value:"Appearance of Suggested Tags",id:"appearance-of-suggested-tags",level:3},{value:"Impact on Deployment Pipelines",id:"impact-on-deployment-pipelines",level:3},{value:"Impact on Application Group",id:"impact-on-application-group",level:3},{value:"Impact on Release",id:"impact-on-release",level:3}];function g(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"tags-policy",children:"Tags Policy"})}),"\n",(0,a.jsxs)(n.h2,{id:"introduction-",children:["Introduction ",(0,a.jsx)(n.a,{href:"https://devtron.ai/pricing",children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",alt:""})})]}),"\n",(0,a.jsx)(n.p,{children:"Managing resources in Kubernetes often requires categorizing and grouping resources for better visibility and analysis. A common use case is cost allocation. By analyzing Kubernetes labels, teams can identify which departments consume the most resources. However, this is only possible if the relevant tags are propagated as Kubernetes labels."}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.strong,{children:"Tags Policy"})," feature in Devtron allows you to enforce a tag that must be provided before application creation or before deployment to an environment. For example, you can create a tag named ",(0,a.jsx)(n.code,{children:"team"})," and if it is propagated as labels to Kubernetes resources, you can easily audit the team-wise usage and resource consumption by its tag. Additionally, you can enforce deployment-specific rules for your applications if required tags are missing."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/mandatory-tag.gif",alt:"Figure 1: How Tags Policy Works"})}),"\n",(0,a.jsx)(n.h2,{id:"adding-tag-policy",children:"Adding Tag Policy"}),"\n",(0,a.jsx)(n.admonition,{title:"Who Can Perform This Action?",type:"warning",children:(0,a.jsx)(n.p,{children:"Users need to have super-admin permission to create tag policy."})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Go to ",(0,a.jsx)(n.strong,{children:"Global Configurations"})," \u2192 ",(0,a.jsx)(n.strong,{children:"Tags Policy"}),"."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/gc-tags-policy.jpg",alt:"Figure 2: Tags Policy"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Click ",(0,a.jsx)(n.strong,{children:"+ Add Tag"}),"."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/add-tags-gc.jpg",alt:"Figure 3: 'Add Tag' Button"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Suggested tags/Mandatory tags"})," - You can either suggest tags or make them mandatory when creating applications:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["If you want the person creating an application to compulsarily provide a tag, use ",(0,a.jsx)(n.code,{children:"Mandatory tags"}),". Mandatory tags have two consequences:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Blocks application creation if the required tag is not provided."}),"\n",(0,a.jsx)(n.li,{children:"Blocks deployment if restriction is enforced."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["If you just want to offer tag suggestions, use ",(0,a.jsx)(n.code,{children:"Suggested tags"}),". These will appear as ",(0,a.jsx)(n.a,{href:"#appearance-of-suggested-tags",children:"dropdown suggestions"})," when adding tags to applications globally, and users can optionally use them if needed."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/suggested-mandatory.gif",alt:"Figure 4: Creating Suggested or Mandatory Tag"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Select Project(s)"})," - To mandate a tag, you must provide a project where this policy should apply. All applications in the project will require the mandatory tag to be entered. Whereas, suggested tags are shown as suggestions globally (i.e., for all apps)."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/select-projects.jpg",alt:"Figure 5: Selecting One or More Projects"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Tag Key"})," - Enter the key from the key-value pair (tag), e.g., ",(0,a.jsx)(n.em,{children:"Business Unit"}),", ",(0,a.jsx)(n.em,{children:"Team"}),", ",(0,a.jsx)(n.em,{children:"Owner"}),"."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/tag-key.gif",alt:"Figure 6: Entering Tag Key"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Value Choices"})," - Here, you can create a list of values for the key-value pair (tag). A tag value can be a free text or you can restrict it to a set of values for the user to choose from."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/value-choices.gif",alt:"Figure 7: Creating List of Choices"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["You may enable ",(0,a.jsx)(n.strong,{children:"Allow Custom Input"})," to give the user a choice to enter their own value if it is unavailable in the list. Or you may skip creating the list of choices altogether so that your user can enter their own value."]}),"\n",(0,a.jsxs)(n.ol,{start:"7",children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Description"})," - Write a brief description explaining the significance of the tag."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/tag-description.gif",alt:"Figure 8: Adding Description for the Tag"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Allow/Block Deployments"})," - Mandatory tags additionally let you define what should happen if users do not configure them in the intended projects:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Allow deployments"})," - Use this option if you want to allow the user to deploy an existing application where mandatory tags are not configured yet."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Block deployment stages of prod environments"})," - Use this option if you want to prevent the user from deploying an existing application to ",(0,a.jsx)(n.a,{href:"../global-configurations/cluster-and-environments#add-environment-to-a-cluster",children:"production environments"}),", if mandatory tags are not configured."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Block deployment stages of non-prod enviroments"})," - Use this option if you want to prevent the user from deploying an existing application to ",(0,a.jsx)(n.a,{href:"../global-configurations/cluster-and-environments#add-environment-to-a-cluster",children:"non-production environments"}),", if mandatory tags are not configured."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Block deployment stages of all environments"})," - This will prevent the user from deploying an existing application to all environments if mandatory tags are not configured."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/allow-block.gif",alt:"Figure 9: Deciding Deployment Restrictions"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Propagate Tag"})," - By default, tags assigned to applications in Devtron are not automatically propagated to Kubernetes resources as labels. For more information on how labels function in Kubernetes, refer to the ",(0,a.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/",children:"Kubernetes Labels Documentation"}),"."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/propagate-tag.gif",alt:"Figure 10a: Propagating Tags"})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/propagation-enable-disable.jpg",alt:"Figure 10b: Enabling/Disabling Propagation"})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/inject-tags.jpg",alt:"Figure 10c: How Tag Propagation Works"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.admonition,{title:"Changing Propagation in Suggested Tags vs. Mandatory Tags",type:"info",children:[(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"In suggested tags"}),": When you enable/disable tag propagation, users can still disable/enable it during app creation, ensuring its tags propagate to associated Kubernetes resources."]}),(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"In mandatory tags"}),": When you enable/disable tag propagation, users do not get the option to change the propagation setting."]})]}),"\n",(0,a.jsxs)(n.ol,{start:"10",children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["(Optional) Click the ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"+"})})," option to create more suggested tags or more mandatory tags in one go."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/add-more-tags.gif",alt:"Figure 11: Adding More Tag"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Click ",(0,a.jsx)(n.strong,{children:"Save"})," to create the tag(s)."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"editing-a-tag",children:"Editing a Tag"}),"\n",(0,a.jsx)(n.admonition,{title:"Who Can Perform This Action?",type:"warning",children:(0,a.jsx)(n.p,{children:"Users need to have super-admin permission to edit tags."})}),"\n",(0,a.jsx)(n.p,{children:"You can edit an existing tag key to do the following:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Modify the tag key"}),"\n",(0,a.jsx)(n.li,{children:"Add/remove value choices"}),"\n",(0,a.jsx)(n.li,{children:"Tweak the description"}),"\n",(0,a.jsx)(n.li,{children:"Change deployment restrictions"}),"\n",(0,a.jsx)(n.li,{children:"Add or remove projects"}),"\n",(0,a.jsx)(n.li,{children:"Convert Tags from Suggested to Mandatory (or vice versa)"}),"\n",(0,a.jsx)(n.li,{children:"Enable/Disable the propagation of tags"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Once done, click ",(0,a.jsx)(n.strong,{children:"Update"})," to apply the changes."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/edit-tags.gif",alt:"Figure 12: Editing a Tag"})}),"\n",(0,a.jsx)(n.h3,{id:"editing-in-bulk",children:"Editing in Bulk"}),"\n",(0,a.jsx)(n.p,{children:"You may use the checkboxes to add/remove projects from multiple tags at once as shown below."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/add-remove-projects.gif",alt:"Figure 13: Adding/Removing projects in Bulk"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"deleting-a-tag",children:"Deleting a Tag"}),"\n",(0,a.jsx)(n.admonition,{title:"Who Can Perform This Action?",type:"warning",children:(0,a.jsx)(n.p,{children:"Users need to have super-admin permission to delete tags."})}),"\n",(0,a.jsx)(n.p,{children:"If you delete a 'Suggested Tag', it will no longer show up as a suggestion to your users while adding tags. If it's a 'Mandatory Tag', the deployment rules (if any, associated with that tag) will no longer be enforced."}),"\n",(0,a.jsx)(n.p,{children:"However, this action will not delete the applied tag from existing applications."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/delete-tag.gif",alt:"Figure 14: Deleting a Tag"})}),"\n",(0,a.jsx)(n.p,{children:"If you wish to delete multiple tags, you may use the checkboxes to select the tags and delete them from the floating widget as shown below."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/bulk-delete-tags.gif",alt:"Figure 15: Deleting Multiple Tags"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"results",children:"Results"}),"\n",(0,a.jsx)(n.h3,{id:"appearance-of-mandatory-tags",children:"Appearance of Mandatory Tags"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"The mandatory tag is available for users to configure after they select the project in the app creation page. It is marked by a red asterisk."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/mandatory-tag-result1.gif",alt:"Figure 16: Mandatory Tag - App Creation Page"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["For an existing application, users can configure it from the ",(0,a.jsx)(n.strong,{children:"Overview"})," page of the application."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/mandatory-tag-overview.gif",alt:"Figure 17: Mandatory Tag - Overview Page"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"In a project where mandatory tags are enabled, if the user does not provide values for the mandatory tags, the user cannot create an app in that project."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/mandatory-tag-result3.gif",alt:"Figure 18: App creation not allowed"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"appearance-of-suggested-tags",children:"Appearance of Suggested Tags"}),"\n",(0,a.jsxs)(n.p,{children:["Users can see a dropdown list of your suggested tags while creating a new app or on the ",(0,a.jsx)(n.strong,{children:"Overview"})," page of an existing application."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/suggested-tag-result.gif",alt:"Figure 19: Suggested Tags in Dropdown"})}),"\n",(0,a.jsx)(n.h3,{id:"impact-on-deployment-pipelines",children:"Impact on Deployment Pipelines"}),"\n",(0,a.jsxs)(n.p,{children:["If an existing application belongs to a project where mandatory tags are enabled along with deployment restrictions, if the user does not provide values for the mandatory tags, they cannot deploy that app to the intended environment (check step 9 of ",(0,a.jsx)(n.a,{href:"#adding-tag-policy",children:"adding tags"}),")."]}),"\n",(0,a.jsx)(n.p,{children:"The same is true for auto-triggering deployment pipelines. A new image available after the build stage will not auto-trigger the deployment pipeline due to the missing mandatory tags."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/deployment-impact.gif",alt:"Figure 20: Deployment Restriction"})}),"\n",(0,a.jsx)(n.h3,{id:"impact-on-application-group",children:"Impact on Application Group"}),"\n",(0,a.jsxs)(n.p,{children:["Similarly, if deployment restrictions apply due to missing mandatory tags, users cannot deploy apps to the intended environment from the ",(0,a.jsx)(n.a,{href:"/docs-devtron/docs/user-guide/application-groups",children:"Application Group"}),"."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/application-group-impact.gif",alt:"Figure 21: Deployment Restriction in Application Group"})}),"\n",(0,a.jsx)(n.h3,{id:"impact-on-release",children:"Impact on Release"}),"\n",(0,a.jsxs)(n.p,{children:["If a user attempts to ",(0,a.jsx)(n.a,{href:"../software-distribution-hub/release-hub#deploying-release",children:"deploy a release"})," that contains applications with missing mandatory tags, the deployment will be blocked if restrictions apply."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/mandatory-tags/release-blocked.gif",alt:"Figure 22: Deployment Restriction in Release (SDH)"})})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(g,{...e})}):g(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>r});var t=s(6540);const a={},i=t.createContext(a);function o(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);