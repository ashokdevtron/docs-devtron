"use strict";(self.webpackChunkdocdevtron=self.webpackChunkdocdevtron||[]).push([[4846],{3272:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"user-guide/plugins/create-plugin","title":"Create Your Plugin","description":"Introduction","source":"@site/docs/user-guide/plugins/create-plugin.md","sourceDirName":"user-guide/plugins","slug":"/user-guide/plugins/create-plugin","permalink":"/docs-devtron/docs/user-guide/plugins/create-plugin","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Pipeline Plugins","permalink":"/docs-devtron/docs/user-guide/plugins/"},"next":{"title":"plugin-list","permalink":"/docs-devtron/docs/user-guide/plugins/plugin-list"}}');var t=i(4848),r=i(8453);const l={},o="Create Your Plugin",a={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Plugin Creation",id:"plugin-creation",level:2},{value:"Part 1: Create a Custom Task",id:"part-1-create-a-custom-task",level:3},{value:"Part 2: Convert Custom Task to a Plugin",id:"part-2-convert-custom-task-to-a-plugin",level:3},{value:"Create a New Version of Plugin",id:"create-a-new-version-of-plugin",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"create-your-plugin",children:"Create Your Plugin"})}),"\n",(0,t.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(n.p,{children:"Devtron lets you create plugins to run specific tasks at different stages of your CI/CD pipelines. You can create any of the following:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"CI plugin (in pre-build/post-build stage)"}),"\n",(0,t.jsx)(n.li,{children:"CD plugin (in pre-deployment/post-deployment stage)\n...or both."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"You can achieve this by converting a fully functional custom task into a plugin. Creating a plugin makes it reusable with other CI or CD pipelines."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"plugin-creation",children:"Plugin Creation"}),"\n",(0,t.jsx)(n.p,{children:"There are two parts to creating a plugin:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#part-1-create-a-custom-task",children:"Create a Custom Task"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#part-2-convert-custom-task-to-a-plugin",children:"Convert Custom Task to a Plugin"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"part-1-create-a-custom-task",children:"Part 1: Create a Custom Task"}),"\n",(0,t.jsx)(n.admonition,{title:"Who Can Perform This Action?",type:"warning",children:(0,t.jsx)(n.p,{children:"Only superadmins can create plugins."})}),"\n",(0,t.jsx)(n.admonition,{title:"Prerequisite",type:"info",children:(0,t.jsxs)(n.p,{children:["A build or deployment pipeline must exist in the ",(0,t.jsx)(n.strong,{children:"Workflow Editor"})," of your app."]})}),"\n",(0,t.jsx)(n.p,{children:"In the following example, we are creating a plugin named 'Secret Management Validator'."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Go to ",(0,t.jsx)(n.strong,{children:"Applications"})," and select your app from the ",(0,t.jsx)(n.strong,{children:"Devtron Apps"})," tab."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/select-devtron-app.jpg",alt:"Figure 1: Choosing your App"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["From the ",(0,t.jsx)(n.strong,{children:"Configurations"})," tab, go to ",(0,t.jsx)(n.strong,{children:"Workflow Editor"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/workflow-editor.jpg",alt:"Figure 2: Workflow Editor"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Click any pipeline (build/deployment pipeline)."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/select-pipeline.jpg",alt:"Figure 3: Selecting Pipeline"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Go to the ",(0,t.jsx)(n.strong,{children:"Pre"})," or ",(0,t.jsx)(n.strong,{children:"Post"})," stage of your pipeline, e.g., ",(0,t.jsx)(n.code,{children:"Pre-build stage"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/pre-build-stage.jpg",alt:"Figure 4: Selecting Stage"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.strong,{children:"+ Add Task"})," to create a plugin from scratch or click an existing task."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/execute-custom-task.jpg",alt:"Figure 5: Adding a Task"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["On the ",(0,t.jsx)(n.strong,{children:"Execute Custom Task"})," page, fill the following details:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Task Name"})," - Give a name to the task, e.g., ",(0,t.jsx)(n.code,{children:"Secret Management Validator Task"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Description"})," - Write the purpose of the task in brief."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Task Type"})," - Choose ",(0,t.jsx)(n.code,{children:"Shell"})," if the task consists of shell commands or choose ",(0,t.jsx)(n.code,{children:"Container Image"})," in case of complex operations that require a specific container environment (refer ",(0,t.jsx)(n.a,{href:"https://docs.devtron.ai/usage/applications/creating-application/workflow/ci-pipeline/ci-build-pre-post-plugins#custom-script-container-image",children:"'Container Image' task"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Input Variables"})," - Add one or more input variables to accept values from the user. Give a name to your input variable along with a description and input type (String/Number/Boolean/Date)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Trigger Skip Condition"})," - Here you can set conditions to execute or skip the task. You can select ",(0,t.jsx)(n.strong,{children:"Set trigger conditions"})," to execute the task, or ",(0,t.jsx)(n.strong,{children:"Set skip conditions"})," to skip the task."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Script"})," - Enter the script to be executed."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Output directory path"})," - Enter the directory where your script will write/produce output files (e.g., test report, zip files)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Output Variables"})," - Similar to input variables, you can create variables whose values will be generated as output after task execution."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/custom-task-page.jpg",alt:"Figure 6: 'Execute Custom Task' Page"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.strong,{children:"Update Pipeline"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/update-plugin.jpg",alt:"Figure 7: 'Update Pipeline' Button"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"Next Steps",type:"tip",children:(0,t.jsxs)(n.p,{children:["Go to the ",(0,t.jsx)(n.strong,{children:"Build & Deploy"})," tab of your application and run the pipeline having your custom task. If the custom task executes correctly and the script performs as expected, you may proceed to ",(0,t.jsx)(n.a,{href:"#part-2-convert-custom-task-to-a-plugin",children:"save your custom task as a plugin"}),"."]})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"part-2-convert-custom-task-to-a-plugin",children:"Part 2: Convert Custom Task to a Plugin"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Go to your custom task that you have tried and tested, and click ",(0,t.jsx)(n.strong,{children:"Save as Plugin"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/save-as-plugin.jpg",alt:"Figure 8: 'Save as Plugin' Option"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["In the ",(0,t.jsx)(n.strong,{children:"New plugin"})," tab, fill the following details:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Fields"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Plugin Icon"})}),(0,t.jsx)(n.td,{children:"Enter the online URL of your plugin icon (jpg/png supported). This image will be shown alongside your plugin name in the list of plugins."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Plugin display name"})}),(0,t.jsxs)(n.td,{children:["Enter the name of your plugin, e.g., ",(0,t.jsx)(n.code,{children:"Secret Management Validator"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Plugin ID"})}),(0,t.jsxs)(n.td,{children:["Enter a unique identifier for your plugin, e.g., ",(0,t.jsx)(n.code,{children:"sec-mgmt-val"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Plugin version"})}),(0,t.jsxs)(n.td,{children:["Enter the version of your plugin. We recommend using semantic versioning, e.g., ",(0,t.jsx)(n.code,{children:"1.0.0"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Documentation link"})}),(0,t.jsxs)(n.td,{children:["Give the user guide link for this plugin, e.g., ",(0,t.jsx)(n.code,{children:"https://docs.devtron.ai/usage/plugins/plugin-list/jira-validator"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Description"})}),(0,t.jsx)(n.td,{children:"Enter a brief description of your plugin explaining what the plugin does"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Tags"})}),(0,t.jsxs)(n.td,{children:["Select one or more tags from the list or create your own tag. This tag helps in identifying and classifying the plugin, e.g., ",(0,t.jsx)(n.code,{children:"Compliance"})," ",(0,t.jsx)(n.code,{children:"Secrets"})," ",(0,t.jsx)(n.code,{children:"Security"}),"."]})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/new-plugin-tab.jpg",alt:"Figure 8: Entering New Plugin Details"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"You have the option of marking the input variables (defined in step 6 earlier) as mandatory/optional. Enabling the toggle will make the input variable mandatory for your users."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/mandatory-optional.jpg",alt:"Figure 9: Marking Variables as Mandatory or Optional"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Since you created the plugin from a custom task, you get an option to replace the original task with your plugin (in the task list)."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/replace-with-plugin.jpg",alt:"Figure 10: Replace Task with Plugin"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.strong,{children:"Create Plugin Version"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/create-plugin-version.jpg",alt:"Figure 11: 'Create Plugin Version' Button"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Your new plugin would appear in the list of plugins."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/plugin-list-visible.jpg",alt:"Figure 12: List of Plugins"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"create-a-new-version-of-plugin",children:"Create a New Version of Plugin"}),"\n",(0,t.jsx)(n.admonition,{title:"Who Can Perform This Action?",type:"warning",children:(0,t.jsx)(n.p,{children:"Only superadmins can create new versions of a plugin."})}),"\n",(0,t.jsxs)(n.p,{children:["You may create incremental versions of your plugin (e.g., ",(0,t.jsx)(n.code,{children:"1.0.0"})," \u2192 ",(0,t.jsx)(n.code,{children:"1.0.1"})," or ",(0,t.jsx)(n.code,{children:"2.0.0"}),"). The old version(s) of your plugins will still be available to your users."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Follow steps 1-7 from the ",(0,t.jsx)(n.a,{href:"#plugin-creation",children:"Plugin Creation"})," section of this document."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["From the ",(0,t.jsx)(n.strong,{children:"New version of existing plugin"})," tab, select the plugin for which you want to create a new version from the ",(0,t.jsx)(n.strong,{children:"Existing Plugin"})," dropdown."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/existing-plugin-select.jpg",alt:"Figure 13: Selecting Existing Plugin for Versioning"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Specify the new version in the ",(0,t.jsx)(n.strong,{children:"New version"})," field."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/new-plugin-version.jpg",alt:"Figure 14: Creating New Version"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Verify the details in the remaining fields that got auto-populated from your existing plugin and modify if required."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.strong,{children:"Create Plugin Version"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"You can view and use the available plugin versions as shown below."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/plugins/create-plugin/plugin-versions.jpg",alt:"Figure 15: Selecting a Version"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"--\x3e"})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var s=i(6540);const t={},r=s.createContext(t);function l(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);